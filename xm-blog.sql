/*
 Navicat Premium Data Transfer

 Source Server         : 本机
 Source Server Type    : MySQL
 Source Server Version : 50724 (5.7.24)
 Source Host           : localhost:3306
 Source Schema         : xm-blog

 Target Server Type    : MySQL
 Target Server Version : 50724 (5.7.24)
 File Encoding         : 65001

 Date: 02/06/2025 15:56:41
*/

SET NAMES utf8mb4;
SET FOREIGN_KEY_CHECKS = 0;

-- ----------------------------
-- Table structure for activity
-- ----------------------------
DROP TABLE IF EXISTS `activity`;
CREATE TABLE `activity`  (
  `id` int(11) NOT NULL AUTO_INCREMENT COMMENT 'ID',
  `name` varchar(255) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci NULL DEFAULT NULL COMMENT '活动名称',
  `descr` varchar(1000) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci NULL DEFAULT NULL COMMENT '活动简介',
  `content` longtext CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci NULL COMMENT '活动内容',
  `start` varchar(255) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci NOT NULL COMMENT '开始时间',
  `end` varchar(255) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci NULL DEFAULT NULL COMMENT '结束时间',
  `form` varchar(255) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci NULL DEFAULT NULL COMMENT '活动形式',
  `address` varchar(255) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci NULL DEFAULT NULL COMMENT '活动地址',
  `host` varchar(255) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci NULL DEFAULT NULL COMMENT '主办方',
  `read_count` int(11) NULL DEFAULT 0 COMMENT '浏览量',
  `cover` varchar(255) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci NULL DEFAULT NULL COMMENT '封面',
  PRIMARY KEY (`id`) USING BTREE
) ENGINE = InnoDB AUTO_INCREMENT = 11 CHARACTER SET = utf8mb4 COLLATE = utf8mb4_unicode_ci COMMENT = '活动' ROW_FORMAT = DYNAMIC;

-- ----------------------------
-- Records of activity
-- ----------------------------
INSERT INTO `activity` VALUES (1, '让技术发光', '让技术发光', '<p>让技术发光。极狐开发者社区内容共创计划</p>', '2023-10-15', '2023-11-15', '线上', '江西农业大学', '江西农业大学', 8, 'http://localhost:9090/files/1712035290355-活动1.png');
INSERT INTO `activity` VALUES (2, '测试数据', '仅仅是测试数据', '<p>仅仅是测试数据</p><p>仅仅是测试数据</p><p>仅仅是测试数据</p><p>仅仅是测试数据</p><p>仅仅是测试数据</p><p><img src=\"http://localhost:9090/files/1712036862966-活动2.png\" style=\"max-width:100%;\" contenteditable=\"false\"/></p>', '2023-10-15', '2023-11-15', '线上', '江西农业大学', '江西农业大学教务处', 3, 'http://localhost:9090/files/1712036819193-活动2.png');
INSERT INTO `activity` VALUES (3, '2024GIAC全球互联网架构大会', '2023年10月16日 9:00 ～ 2024年10月16日 18:00', '<p>全球互联网架构大会(简称“GIAC”)是长期关注互联网技术与架构的高可用架构技术社区和msup推出的，面向架构师、技术负责人及高端技术从业人员的年度技术架构大会，是中国地区规模最大的技术会议之一。</p><p><br/></p><p>第11届GIAC，组委会从互联网架构热门的AIGC、效能提升、 云原生架构、数据智能、新硬件等领域甄选前沿的有典型代表的技术创新及研发实践的架构案例，分享他们在本年度值得的总结、盘点的实践启示，打造一个分享及讨论平台，帮助和指导听众了解和改进互联网构建方式。</p><p><br/></p><p><strong><img src=\"http://cdn.huodongxing.com/file/ue/201304/1148EC289DAF211A40AF47CABBD8DD1186/30315199677759358.jpg\" alt=\"落地页无二维码版本.jpg\"/></strong></p>', '2023-10-16', '2023-10-16', '线下', '（广东深圳）华侨城深南大道9009号深圳华侨城洲际大酒店', '全球互联网架构大会', 95, 'http://localhost:9090/files/1712039460949-v2-a5894a797a381e2666b5a32b24118eeb_r.jpg');
INSERT INTO `activity` VALUES (4, '让技术发光', '让技术发光', '<p>让技术发光。极狐开发者社区内容共创计划</p>', '2023-10-20', '2023-11-01', '线上', '江西农业大学', '江西农业大学', 3, 'http://localhost:9090/files/1712035290355-活动1.png');
INSERT INTO `activity` VALUES (5, '测试数据', '仅仅是测试数据', '<p>仅仅是测试数据</p><p>仅仅是测试数据</p><p>仅仅是测试数据</p><p>仅仅是测试数据</p><p>仅仅是测试数据</p><p><img src=\"http://localhost:9090/files/1712036862966-活动2.png\" style=\"max-width:100%;\" contenteditable=\"false\"/></p>', '2023-10-04', '2024-03-08', '线上', '江西农业大学', '江西农业大学教务处', 3, 'http://localhost:9090/files/1712036819193-活动2.png');
INSERT INTO `activity` VALUES (6, '测试数据', '仅仅是测试数据', '<p>仅仅是测试数据</p><p>仅仅是测试数据</p><p>仅仅是测试数据</p><p>仅仅是测试数据</p><p>仅仅是测试数据</p><p><img src=\"http://localhost:9090/files/1712036862966-活动2.png\" style=\"max-width:100%;\" contenteditable=\"false\"/></p>', '2024-02-04', '2024-04-08', '线上', '江西农业大学', '江西农业大学教务处', 8, 'http://localhost:9090/files/1712036819193-活动2.png');
INSERT INTO `activity` VALUES (7, '测试数据', '仅仅是测试数据', '<p>仅仅是测试数据</p><p>仅仅是测试数据</p><p>仅仅是测试数据</p><p>仅仅是测试数据</p><p>仅仅是测试数据</p><p><img src=\"http://localhost:9090/files/1712036862966-活动2.png\" style=\"max-width:100%;\" contenteditable=\"false\"/></p>', '2024-02-04', '2024-04-08', '线上', '江西农业大学', '江西农业大学教务处', 62, 'http://localhost:9090/files/1712036819193-活动2.png');
INSERT INTO `activity` VALUES (8, '测试数据', '仅仅是测试数据', '<p>仅仅是测试数据</p><p>仅仅是测试数据</p><p>仅仅是测试数据</p><p>仅仅是测试数据</p><p>仅仅是测试数据</p><p><img src=\"http://localhost:9090/files/1712036862966-活动2.png\" style=\"max-width:100%;\" contenteditable=\"false\"/></p>', '2024-02-04', '2024-04-08', '线上', '江西农业大学', '江西农业大学教务处', 75, 'http://localhost:9090/files/1712036819193-活动2.png');
INSERT INTO `activity` VALUES (9, '测试数据', '仅仅是测试数据', '<p>仅仅是测试数据</p><p>仅仅是测试数据</p><p>仅仅是测试数据</p><p>仅仅是测试数据</p><p>仅仅是测试数据</p><p><img src=\"http://localhost:9090/files/1712036862966-活动2.png\" style=\"max-width:100%;\" contenteditable=\"false\"/></p>', '2024-02-04', '2024-06-08', '线上', '江西农业大学', '江西农业大学教务处', 85, 'http://localhost:9090/files/1712036819193-活动2.png');
INSERT INTO `activity` VALUES (10, '测试数据', '仅仅是测试数据', '<p>仅仅是测试数据</p><p>仅仅是测试数据</p><p>仅仅是测试数据</p><p>仅仅是测试数据</p><p>仅仅是测试数据</p><p><img src=\"http://localhost:9090/files/1712036862966-活动2.png\" style=\"max-width:100%;\" contenteditable=\"false\"/></p>', '2024-02-04', '2024-06-08', '线上', '江西农业大学', '江西农业大学教务处', 105, 'http://localhost:9090/files/1712036819193-活动2.png');

-- ----------------------------
-- Table structure for activity_sign
-- ----------------------------
DROP TABLE IF EXISTS `activity_sign`;
CREATE TABLE `activity_sign`  (
  `id` int(11) NOT NULL AUTO_INCREMENT COMMENT 'ID',
  `activity_id` int(11) NULL DEFAULT NULL COMMENT '活动id',
  `user_id` int(11) NULL DEFAULT NULL COMMENT '用户id',
  `time` datetime NULL DEFAULT NULL COMMENT '报名时间',
  PRIMARY KEY (`id`) USING BTREE
) ENGINE = InnoDB AUTO_INCREMENT = 14 CHARACTER SET = utf8mb4 COLLATE = utf8mb4_unicode_520_ci COMMENT = '活动报名表' ROW_FORMAT = Dynamic;

-- ----------------------------
-- Records of activity_sign
-- ----------------------------
INSERT INTO `activity_sign` VALUES (1, 3, 1, '2024-04-02 16:32:36');
INSERT INTO `activity_sign` VALUES (2, 8, 1, '2024-04-02 16:40:54');
INSERT INTO `activity_sign` VALUES (4, 7, 11, '2024-04-02 21:24:13');
INSERT INTO `activity_sign` VALUES (5, 7, 1, '2024-04-06 19:11:12');
INSERT INTO `activity_sign` VALUES (7, 5, 1, '2024-04-07 10:59:04');
INSERT INTO `activity_sign` VALUES (13, 10, 1, '2024-04-08 19:52:49');

-- ----------------------------
-- Table structure for admin
-- ----------------------------
DROP TABLE IF EXISTS `admin`;
CREATE TABLE `admin`  (
  `id` int(10) NOT NULL AUTO_INCREMENT COMMENT 'ID',
  `username` varchar(255) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci NULL DEFAULT NULL COMMENT '用户名',
  `password` varchar(255) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci NULL DEFAULT NULL COMMENT '密码',
  `name` varchar(255) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci NULL DEFAULT NULL COMMENT '姓名',
  `avatar` varchar(255) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci NULL DEFAULT NULL COMMENT '头像',
  `role` varchar(255) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci NULL DEFAULT NULL COMMENT '角色标识',
  `phone` varchar(255) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci NULL DEFAULT NULL COMMENT '电话',
  `email` varchar(255) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci NULL DEFAULT NULL COMMENT '邮箱',
  PRIMARY KEY (`id`) USING BTREE
) ENGINE = InnoDB AUTO_INCREMENT = 4 CHARACTER SET = utf8mb4 COLLATE = utf8mb4_unicode_ci COMMENT = '管理员' ROW_FORMAT = DYNAMIC;

-- ----------------------------
-- Records of admin
-- ----------------------------
INSERT INTO `admin` VALUES (1, 'admin', 'admin', '小李管理员', 'http://localhost:9090/files/1729472778106-1.jpeg', 'ADMIN', '13677889922', 'admin@xm.com');
INSERT INTO `admin` VALUES (3, 'admin2', '123', '管理员2号', 'http://localhost:9090/files/1709715893093-9da480fe08b44c12f709e4501f9d3fe1936b545d18461ca4.WEBP', 'ADMIN', '188247198312', 'xia00@proton.me');

-- ----------------------------
-- Table structure for blog
-- ----------------------------
DROP TABLE IF EXISTS `blog`;
CREATE TABLE `blog`  (
  `id` int(11) NOT NULL AUTO_INCREMENT COMMENT 'ID',
  `title` varchar(255) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci NULL DEFAULT NULL COMMENT '标题',
  `content` longtext CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci NULL COMMENT '内容',
  `descr` varchar(255) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci NULL DEFAULT NULL COMMENT '简介',
  `cover` varchar(255) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci NULL DEFAULT NULL COMMENT '封面',
  `tags` varchar(255) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci NULL DEFAULT NULL COMMENT '标签',
  `user_id` int(11) NULL DEFAULT NULL COMMENT '发布人ID',
  `date` varchar(255) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci NULL DEFAULT NULL COMMENT '发布日期',
  `read_count` int(11) NULL DEFAULT 0 COMMENT '浏览量',
  `category_id` int(11) NULL DEFAULT NULL COMMENT '分类ID',
  PRIMARY KEY (`id`) USING BTREE
) ENGINE = InnoDB AUTO_INCREMENT = 14 CHARACTER SET = utf8mb4 COLLATE = utf8mb4_unicode_ci COMMENT = '博客信息' ROW_FORMAT = DYNAMIC;

-- ----------------------------
-- Records of blog
-- ----------------------------
INSERT INTO `blog` VALUES (1, 'mysql高级篇', '<p>1111</p>', '重点介绍索引，sql优化以及mysql的底层', 'http://localhost:9090/files/1710470452054-OIP (23).jpg', '[\"后端\",\"面试\"]', 10, '2023-09-10', 33, 1);
INSERT INTO `blog` VALUES (2, '聊聊我的前端面试心得', '<p>最近的面试中有一个面试官问我按钮级别的权限怎么控制，我说直接v-if啊，他说不够好，我说我们项目中按钮级别的权限控制情况不多，所以v-if就够了，他说不够通用，最后他对我的评价是做过很多东西，但是都不够深入，好吧，那今天我们就来深入深入。</p><p><br/>因为我自己没有相关实践，所以接下来就从这个有16.2k星星的后台管理系统项目Vue vben admin中看看它是如何做的。</p><p><br/></p><p>要做权限控制，肯定需要一个<code>code</code>，无论是权限码还是角色码都可以，一般后端会一次性返回，然后全局存储起来就可以了，<code>Vue vben admin</code>是在登录成功以后获取并保存到全局的<code>store</code>中：</p><pre><code class=\"JavaScript\"><span class=\"hljs-keyword\">import</span> { defineStore } <span class=\"hljs-keyword\">from</span> <span class=\"hljs-string\">\'pinia\'</span>;\n<span class=\"hljs-keyword\">export</span> <span class=\"hljs-keyword\">const</span> usePermissionStore = <span class=\"hljs-title function_\">defineStore</span>({\n<span class=\"hljs-attr\">state</span>: () =&amp;gt; ({\n<span class=\"hljs-comment\">// 权限代码列表</span>\n<span class=\"hljs-attr\">permCodeList</span>: [],\n}),\n<span class=\"hljs-attr\">getters</span>: {\n<span class=\"hljs-comment\">// 获取</span>\n<span class=\"hljs-title function_\">getPermCodeList</span>(<span class=\"hljs-params\"></span>){\n<span class=\"hljs-keyword\">return</span> <span class=\"hljs-variable language_\">this</span>.<span class=\"hljs-property\">permCodeList</span>;\n},\n},\n<span class=\"hljs-attr\">actions</span>: {\n<span class=\"hljs-comment\">// 存储</span>\n<span class=\"hljs-title function_\">setPermCodeList</span>(<span class=\"hljs-params\">codeList</span>) {\n<span class=\"hljs-variable language_\">this</span>.<span class=\"hljs-property\">permCodeList</span> = codeList;\n},\n\n<span class=\"hljs-comment\">// 请求权限码</span>\n<span class=\"hljs-keyword\">async</span> <span class=\"hljs-title function_\">changePermissionCode</span>(<span class=\"hljs-params\"></span>) {\n<span class=\"hljs-keyword\">const</span> codeList = <span class=\"hljs-keyword\">await</span> <span class=\"hljs-title function_\">getPermCode</span>();\n<span class=\"hljs-variable language_\">this</span>.<span class=\"hljs-title function_\">setPermCodeList</span>(codeList);\n}\n}\n})</code></pre><p>1111</p>', '最近的面试中有一个面试官问我按钮级别的权限怎么控制，最近的面试中有一个面试官问我按钮级别的权限怎么控制，最近的面试中有一个面试官问我按钮级别的权限怎么控制，', 'http://localhost:9090/files/1712407950576-微信截图_20231117155534.png', '[\"前端\",\"面试\"]', 11, '2023-09-17', 113, 2);
INSERT INTO `blog` VALUES (3, '你的代码不堪一击！太烂了！', '<p>小王，你的页面白屏了，赶快修复一下。小王排查后发现是服务端传回来的数据格式不对导致，无数据时传回来不是 [] 而是 null, 从而导致 forEach 方法报错导致白屏，于是告诉测试，这是服务端的错误导致，要让服务端来修改，结果测试来了一句：“服务端返回数据格式错误也不能白屏！！” “好吧，千错万错都是前端的错。” 小王抱怨着把白屏修复了。</p><p><br/>刚过不久，老李喊道：“小王，你的组件又渲染不出来了。” 小王不耐烦地过来去看了一下，“你这个属性data 格式不对，要数组，你传个对象干嘛呢。”老李反驳： “ 就算 data 格式传错，也不应该整个组件渲染不出来，至少展示暂无数据吧！” “行，你说什么就是什么吧。” 小王又抱怨着把问题修复了。</p><p><br/>类似场景，小王时不时都要经历一次，久而久之，大家都觉得小王的技术太菜了。小王听到后，倍感委屈：“这都是别人的错误，反倒成为我的错了！”</p><p><br/>等到小王离职后，我去看了一下他的代码，的确够烂的，不堪一击！太烂了！下面来吐槽一下。<br/><br/></p>', '小王，你的页面白屏了，赶快修复一下。', 'http://localhost:9090/files/1712407938007-微信截图_20231117154820.png', '[\"后端\",\"Java\",\"面试\"]', 10, '2023-09-10', 274, 1);
INSERT INTO `blog` VALUES (4, '程序员更需要钝感力', '<p>讲一个大多数同学都会遇到的事，之前在一家单位随着部门发展，空降了个老大哥（前端领导）。怎么说呢那个时候自己陷入了一个极其痛苦的时期，他呢每天都很闲不干活，活呢都交给我跟另外一个哥们干，而且功劳还是他的。我很不爽，当我跟我对象说这个事的时候，她说谁让人家是领导呢！！现在再总结的时候发现好像都释怀了，那个时候每天晚上失眠睡不着。<br/><br/>那个时候痛苦的点是：<br/><br/>1. 身为领导不作为。<br/>2. 身为领导技术能力不行。<br/>3. 把我的产出都当作自己的汇报给领导。<br/><br/>其实那个时候或多或少会跟他对着干，我对象也跟我聊过这个事说不要跟领导对着干，人家是领导不干活就不干活了。好像确实没落到什么好处，最后还是人家啥活不干，痛苦的还是自己。还是要学会向上管理。 <br/>都是打工的，工期是按照人日排的，就是换个领导，怎么着你都要干活的啊！谁让你不是领导呢。</p><p>&nbsp; <br/>到现在听到有吐槽领导会不干活、技术能力不行、功劳是自己的，锅都是我的一些吐槽。我都会笑笑不说什么，其实反过来想领导的位置不允许犯错，一般当领导的年龄都很大了（可能不是那么容易找到那么符合预期的工作了），假如再犯一些低级的错误，会被领导的领导不信任等。你如果能跟领导相处很好，就是犯错了锅是你的，最后你得绩效还是好的。</p><p><br/>领导积极管理组织分享、一块搞些新奇的东西也好，不作为也好，干好自己的工作积极响应，自己擅长的领域就好好发挥，管他结果是啥呢，大家都聪明人，都看得明白的。有时间了就学点新东西，都是打工的，没必要搞得都心里不舒服，凡事多多人情世故下 哈哈 真不爽了离开就是了。<br/><br/></p>', '程序员每个人都是聪明的，都是反应灵敏的。 一个同事说过这么一句话：\"都当的了程序员，大家都是聪明人，不过有些事不好意思点破罢了，他要是真的太过分，就真的撕破脸！\"。', 'http://localhost:9090/files/1710682031312-微信截图_20231117155534.png', '[\"程序员\",\"综合\"]', 12, '2023-09-17', 8, 5);
INSERT INTO `blog` VALUES (5, 'XSS攻击', '<p>XSS 攻击：即跨站脚本攻击，它是 Web 程序中常见的漏洞。原理是攻击者往 Web 页面里插入恶意的脚本代码（css 代码、Javascript 代码等），当用户浏览该页面时，嵌入其中的脚本代码会被执行，从而达到恶意攻击用户的目的，如盗取用户 cookie、破坏页面结构、重定向到其他网站等。</p><p>预防 XSS 的核心是必须对输入的数据做过滤处理。</p>', '主要介绍XSS攻击', 'http://localhost:9090/files/1710484008493-OIP (25).jpg', '[\"后端\",\"Java\",\"面试\"]', 15, '2023-09-10', 7, 1);
INSERT INTO `blog` VALUES (6, 'spring mvc 和 struts 的区别', '<div><ul><li>拦截级别：struts2 是类级别的拦截；spring mvc 是方法级别的拦截。</li><li>数据独立性：spring mvc 的方法之间基本上独立的，独享 request 和 response 数据，请求数据通过参数获取，处理结果通过 ModelMap 交回给框架，方法之间不共享变量；而 struts2 虽然方法之间也是独立的，但其所有 action 变量是共享的，这不会影响程序运行，却给我们编码和读程序时带来了一定的麻烦。</li><li>拦截机制：struts2 有以自己的 interceptor 机制，spring mvc 用的是独立的 aop 方式，这样导致struts2 的配置文件量比 spring mvc 大。</li><li>对 ajax 的支持：spring mvc 集成了ajax，所有 ajax 使用很方便，只需要一个注解 @ResponseBody 就可以实现了；而 struts2 一般需要安装插件或者自己写代码才行。</li></ul></div><p><img src=\"http://localhost:9090/files/1710509243180-anime-Jojo-2187539.jpg\" style=\"max-width:100%;\" contenteditable=\"false\" width=\"330.88\" height=\"139.58\"/><br/></p>', 'spring mvc 和 struts 的区别是什么', 'http://localhost:9090/files/1710486891445-coffee-791439_1920.jpg', '[\"后端\",\"Java\",\"面试\"]', 13, '2023-10-10', 7, 1);
INSERT INTO `blog` VALUES (7, '111', '', '111', 'http://localhost:9090/files/1710662201469-QQ截图20230627022254.png', '[\"小白\"]', 13, '2024-03-16', 9, 4);
INSERT INTO `blog` VALUES (8, '2W字全面剖析Mybatis中的9种设计模式', '<div id=\"article-root\" itemprop=\"articleBody\" class=\"article-viewer markdown-body cache result\" data-v-536a572c=\"\"><style>.markdown-body{color:#595959;font-size:15px;font-family:-apple-system,system-ui,BlinkMacSystemFont,Helvetica Neue,PingFang SC,Hiragino Sans GB,Microsoft YaHei,Arial,sans-serif;background-image:linear-gradient(90deg,rgba(60,10,30,.04) 3%,transparent 0),linear-gradient(1turn,rgba(60,10,30,.04) 3%,transparent 0);background-size:20px 20px;background-position:50%}.markdown-body p{color:#595959;font-size:15px;line-height:2;font-weight:400}.markdown-body p+p{margin-top:16px}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{padding:30px 0;margin:0;color:#135ce0}.markdown-body h1{position:relative;text-align:center;font-size:22px;margin:50px 0}.markdown-body h1:before{position:absolute;content:\"\";top:-10px;left:50%;width:32px;height:32px;transform:translateX(-50%);background-size:100% 100%;opacity:.36;background-repeat:no-repeat;background:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAMAAABEpIrGAAAABGdBTUEAALGPC/xhBQAAACBjSFJNAAB6JgAAgIQAAPoAAACA6AAAdTAAAOpgAAA6mAAAF3CculE8AAABfVBMVEX///8Ad/8AgP8AgP8AgP8Aff8AgP8Af/8AgP8AVf8Af/8Af/8AgP8AgP8Af/8Afv8AAP8Afv8Afv8Aef8AgP8AdP8Afv8AgP8AgP8Acf8Ae/8AgP8Af/8AgP8Af/8Af/8AfP8Afv8AgP8Af/8Af/8Afv8Afv8AgP8Afv8AgP8Af/8Af/8AgP8AgP8Afv8AgP8Af/8AgP8AgP8AgP8Ae/8Afv8Af/8AgP8Af/8AgP8Af/8Af/8Aff8Af/8Abf8AgP8Af/8AgP8Af/8Af/8Afv8AgP8AgP8Afv8Afv8AgP8Af/8Aff8AgP8Afv8AgP8Aff8AgP8AfP8AgP8Ae/8AgP8Af/8AgP8AgP8AgP8Afv8AgP8AgP8AgP8Afv8AgP8AgP8AgP8AgP8AgP8Af/8AgP8Af/8Af/8Aev8Af/8AgP8Aff8Afv8AgP8AgP8AgP8Af/8AgP8Af/8Af/8AgP8Afv8AgP8AgP8AgP8AgP8Af/8AeP8Af/8Af/8Af//////rzEHnAAAAfXRSTlMAD7CCAivatxIDx5EMrP19AXdLEwgLR+6iCR/M0yLRzyFF7JupSXn8cw6v60Q0QeqzKtgeG237HMne850/6Qeq7QaZ+WdydHtj+OM3qENCMRYl1B3K2U7wnlWE/mhlirjkODa9FN/BF7/iNV/2kASNZpX1Wlf03C4stRGxgUPclqoAAAABYktHRACIBR1IAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAB3RJTUUH4gEaBzgZ4yeM3AAAAT9JREFUOMvNUldbwkAQvCAqsSBoABE7asSOBRUVVBQNNuy9996789+9cMFAMHnVebmdm+/bmdtbQv4dOFOW2UjPzgFyLfo6nweKfIMOBYWwFtmMPGz2Yj2pJI0JDq3udJW6VVbmKa9I192VQFV1ktXUAl5NB0cd4KpnORqsEO2ZIRpF9gJfE9Dckqq0KuZt7UAH5+8EPF3spjsRpCeQNO/tA/qDwIDA+OCQbBoKA8NOdjMySgcZGVM6jwcgRuUiSs0nlPFNSrEpJfU0jTLD6llqbvKxei7OzvkFNQohi0vAsj81+MoqsCaoPOQFgus/1LyxichW+hS2JWCHZ7VlF9jb187pIAYcHiViHAMnp5mTjJ8B5xeEXF4B1ze/fTh/C0h398DDI9HB07O8ci+vRBdvdGnfP4gBuM8vw7X/G3wDmFhFZEdxzjMAAAAldEVYdGRhdGU6Y3JlYXRlADIwMTgtMDEtMjZUMDc6NTY6MjUrMDE6MDA67pVWAAAAJXRFWHRkYXRlOm1vZGlmeQAyMDE4LTAxLTI2VDA3OjU2OjI1KzAxOjAwS7Mt6gAAABl0RVh0U29mdHdhcmUAd3d3Lmlua3NjYXBlLm9yZ5vuPBoAAAAWdEVYdFRpdGxlAGp1ZWppbl9sb2dvIGNvcHlxapmKAAAAV3pUWHRSYXcgcHJvZmlsZSB0eXBlIGlwdGMAAHic4/IMCHFWKCjKT8vMSeVSAAMjCy5jCxMjE0uTFAMTIESANMNkAyOzVCDL2NTIxMzEHMQHy4BIoEouAOoXEXTyQjWVAAAAAElFTkSuQmCC)}.markdown-body h2{position:relative;font-size:20px;border-left:4px solid;padding:0 0 0 10px;margin:30px 0}.markdown-body h3{font-size:16px}.markdown-body ul{list-style:disc outside;margin-left:2em;margin-top:1em}.markdown-body li{line-height:2;color:#595959}.markdown-body img.loaded{margin:0 auto;display:block}.markdown-body blockquote{background:#fff9f9;margin:2em 0;padding:2px 20px;border-left:4px solid #b2aec5}.markdown-body blockquote p{color:#666;line-height:2}.markdown-body a{color:#036aca;border-bottom:1px solid rgba(3,106,202,.8);font-weight:400;text-decoration:none}.markdown-body em strong,.markdown-body strong{color:#036aca}.markdown-body hr{border-top:1px solid #135ce0}.markdown-body pre{overflow:auto}.markdown-body code,.markdown-body pre{overflow:auto;position:relative;line-height:1.75;font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre>code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body table{border-collapse:collapse;margin:1rem 0;overflow-x:auto}.markdown-body table td,.markdown-body table th{border:1px solid #dfe2e5;padding:.6em 1em}.markdown-body table tr{border-top:1px solid #dfe2e5}.markdown-body table tr:nth-child(2n){background-color:#f6f8fa}</style><style data-highlight=\"\">.markdown-body pre,.markdown-body pre>code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>在学习设计模式的过程中，我们大多数还是只停留在概念层面，很少有机会能在实际开发中用到，任何一个知识点，如果我们不能达到至少从2个方面去窥探它的话，很难真正去理解它。</p>\n<p>而阅读优秀框架的源码是我们窥探设计模式很好的途径，在Mybatis中用到了大概有9种设计模式：</p>\n<ol>\n<li>Builder模式</li>\n<li>工厂模式</li>\n<li>单例模式</li>\n<li>代理模式</li>\n<li>组合模式</li>\n<li>模板方法模式</li>\n<li>适配器模式</li>\n<li>装饰着模式</li>\n<li>迭代器模式</li></ol>\n<p>对于23种设计模式我们并不需要刻意的记忆，而且很多设计模式的实现原理很像，只不过是名字不一样，并且如果去阅读一些框架的源码的话，可以发现其实框架对很多设计模式的实 现，都并非标准的代码实现，都做了比较多的自我改进。\n实际上，这就是所谓的灵活应用, 只借鉴不照搬, 根据具体问题针对性地去解决。</p>\n<p>软件设计模式犹如剑法一样，当哪天我们真正做到：<strong>手中无剑，心中有剑，人剑合一的境界</strong>，我们才真正理解软件设计。</p></div>', '在学习设计模式的过程中，我们大多数还是只停留在概念层面，很少有机会能在实际开发中用到，任何一个知识点，如果我们不能达到至少从2个方面去窥探它的话，很难真正去理解它。', 'http://localhost:9090/files/1710668249513-微信截图_20231117155534.png', '[\"后端\",\"Java\",\"面试\"]', 14, '2023-09-17', 34, 10);
INSERT INTO `blog` VALUES (9, '适合小公司的自动化部署脚本', '<p>背景（偷懒）<br/>在小小的公司里面，挖呀挖呀挖。快挖不动了，一件事重复个5次，还在人肉手工，身体和心理就开始不舒服了，并且违背了个人的座右铭：“偷懒”是人类进步的第一推动力。<br/>每次想要去测试环境验证个新功能，又或者被测试无情的催促着部署新版本后；都需要本地打那个200多M的jar包；以龟速般的每秒几十KB网络，通过ftp上传到服务器；用烂熟透的jps命令查找到进程，kill后，重启服务。<br/>是的，我想偷懒，想从已陷入到手工部署的沼泽地里走出来。如何救赎？<br/>自我救赎之路<br/>我的诉求很简单，想要一款“一键CI/CD的工具”，然后可以继续偷懒。为了省事，我做了以下工作<br/>找了一款停止服务的脚本，并做了小小的优化<br/>首推 陈皮大哥的停服脚本（我在里面加了个sleep 5）；脚本见下文。只需要修改 APP_MAINCLASS的变量“XXX-1.0.0.jar”替换为自己jar的名字即可，其它不用动。<br/>该脚本主要是通过jps + jar的名字获得进程号，进行kill。( 脚本很简单，注释也很详细，就不展开了，感兴趣可以阅读下，不到5分钟，写过代码的你能看懂的)<br/><br/>作者：程序员猪佩琪<br/>链接：<a href=\"https://juejin.cn/post/7257440759569055802\" target=\"_blank\">https://juejin.cn/post/7257440759569055802</a><br/>来源：稀土掘金<br/>著作权归作者所有。商业转载请联系作者获得授权，非商业转载请注明出处。<br/></p>', '在小小的公司里面，挖呀挖呀挖。快挖不动了，一件事重复个5次，还在人肉手工，身体和心理就开始不舒服了，并且违背了个人的座右铭：“偷懒”是人类进步的第一推动力。', 'http://localhost:9090/files/1710668237520-302636-106.jpg', '[\"后端\"]', 14, '2023-09-22', 38, 8);
INSERT INTO `blog` VALUES (10, '从零开始写一个Vue3+Element Plus的后台管理系统', '<div id=\"article-root\" itemprop=\"articleBody\" class=\"article-viewer markdown-body cache result\" data-v-536a572c=\"\"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre>code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:\"\"}.markdown-body blockquote>p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight=\"\" data-highlight-key=\"juejin\">.markdown-body pre,.markdown-body pre>code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id=\"heading-0\">写在开始之前</h2>\n<p>接触Vue3也有一年的时间了，除了刚开始用Vue3做了一个小小的项目，其后一直没有机会在项目中真正使用Vue3，反而一直维护Vue2的老项目。作为一个有追求（wuliao）的前端，那就自己开一个git仓库练手吧，想试验什么就随便试，既没有deadline的压力，也不用去考虑产品需求，UI还原度。</p>\n<p>萌芽期的git仓库地址 <a href=\"https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Flucidity99%2Fmocha-vue3-system\" target=\"_blank\" title=\"https://github.com/lucidity99/mocha-vue3-system\" ref=\"nofollow noopener noreferrer\">github.com/lucidity99/…</a></p>\n<h2 data-id=\"heading-1\">主要使用的工具（排名不分先后）：</h2>\n<ul class=\"contains-task-list\">\n<li class=\"task-list-item\"><input type=\"checkbox\" disabled=\"\"/> Vue3</li>\n<li class=\"task-list-item\"><input type=\"checkbox\" disabled=\"\"/> Vite</li>\n<li class=\"task-list-item\"><input type=\"checkbox\" disabled=\"\"/> TypeScript</li>\n<li class=\"task-list-item\"><input type=\"checkbox\" disabled=\"\"/> Element Plus</li>\n<li class=\"task-list-item\"><input type=\"checkbox\" disabled=\"\"/> Pinia</li>\n<li class=\"task-list-item\"><input type=\"checkbox\" disabled=\"\"/> SCSS</li>\n<li class=\"task-list-item\"><input type=\"checkbox\" disabled=\"\"/> Tailwind CSS</li>\n<li class=\"task-list-item\"><input type=\"checkbox\" disabled=\"\"/> VueRouter</li>\n<li class=\"task-list-item\"><input type=\"checkbox\" disabled=\"\"/> eCharts</li>\n<li class=\"task-list-item\"><input type=\"checkbox\" disabled=\"\"/> Eslint、Prettier</li>\n</ul>\n<p>模拟接口数据本来打算用Mockjs，后来决定使用Apipost（最终改成了apiFox），感觉更贴近实际开发，接口管理也方便。</p>\n<p>个人目前的难点是Typescript，还不能真正的把ts用好，代码动不动就爆红，所以练手的目的之一就是精进ts。</p>\n<p>计划要做的内容比较多，除了基础的系统设置、功能模块，还有一些一直想尝试但是未曾在Vue项目中完整实现的功能。</p>\n<ul class=\"contains-task-list\">\n<li class=\"task-list-item\"><input type=\"checkbox\" disabled=\"\"/> 切片上传文件</li>\n<li class=\"task-list-item\"><input type=\"checkbox\" disabled=\"\"/> 复杂的表格设置</li>\n<li class=\"task-list-item\"><input type=\"checkbox\" disabled=\"\"/> 换肤功能（目前已实现暗黑模式，但是更复杂的换肤还没有开始做）</li>\n<li class=\"task-list-item\"><input type=\"checkbox\" checked=\"\" disabled=\"\"/> 多页签组件 <a href=\"https://juejin.cn/post/7229907502900461625\" target=\"_blank\" title=\"https://juejin.cn/post/7229907502900461625\">juejin.cn/post/722990…</a></li>\n<li class=\"task-list-item\"><input type=\"checkbox\" checked=\"\" disabled=\"\"/> 各种主流富文本插件引入 <a href=\"https://juejin.cn/post/7234418257759879223\" target=\"_blank\" title=\"https://juejin.cn/post/7234418257759879223\">juejin.cn/post/723441…</a></li>\n<li class=\"task-list-item\"><input type=\"checkbox\" disabled=\"\"/> 尝试Vue3新加入的功能</li>\n<li class=\"task-list-item\"><input type=\"checkbox\" disabled=\"\"/> 尝试Vue3 hook，vueuse</li>\n<li class=\"task-list-item\"><input type=\"checkbox\" disabled=\"\"/> 路由的配置</li>\n<li class=\"task-list-item\"><input type=\"checkbox\" checked=\"\" disabled=\"\"/> 更多配置的axios拦截器 <a href=\"https://juejin.cn/post/7234078736421240869\" target=\"_blank\" title=\"https://juejin.cn/post/7234078736421240869\">juejin.cn/post/723407…</a></li>\n<li class=\"task-list-item\"><input type=\"checkbox\" disabled=\"\"/> ...</li>\n</ul>\n<p>Tailwind CSS是我很感兴趣的原子类CSS库，在以往的使用中，感觉能够实实在在的提升开发体验，后期还打算尝试现在流行的unocss</p></div>', '最近接到了百度的面试，个人觉得基础知识准备的比较充分，就去网上找了一些百度的面经...', 'http://localhost:9090/files/1710681977175-微信截图_20231117155235.png', '[\"前端\"]', 10, '2023-09-17', 39, 2);
INSERT INTO `blog` VALUES (11, '一次令人窒息的百度面试', '<h1>看简历</h1><p>上来首先是万年不变的自我介绍，介绍完之后面试官就开始逐行看我的简历，并针对简历上的项目经历进行询问。询问的十分详细。</p><h1>如何实现新手指引</h1><p>问这个问题的原因是我简历上写到了使用driver.js库实现了新手指引。</p><p><br/></p><p>实现思路是：<br/><br/>点击“开始指引”：找到id为mask的元素，为该元素添加蒙层样式（setMask）<br/>添加提示信息：找到id为tip的元素，将提示信息添加为该元素的子元素(setTip)<br/>高亮当前步骤元素：找到当前目标元素，克隆目标元素，然后将克隆后的目标元素添加为curStepMask的子元素(setTip)<br/>定位tip和curStepMask的元素：curStepMask元素在当前目标元素的正上方，tip元素根据情况而定<br/>每次添加当前提示信息时要移除上一次添加的提示信息和覆盖元素（removeTip，removeStepMask）<br/><br/></p>', '最近接到了百度的面试，个人觉得基础知识准备的比较充分，就去网上找了一些百度的面经', 'http://localhost:9090/files/1710668162324-微信截图_20231117155458.png', '[\"后端\",\"Java\",\"面试\"]', 14, '2023-09-17', 139, 10);
INSERT INTO `blog` VALUES (12, '分库分表已成为过去式，使用分布式数据库才是未来', '<p>转载至我的博客 www.infrastack.cn ，公众号：架构成长指南<br/><br/>当我们使用 Mysql数据库到达一定量级以后，性能就会逐步下降，而解决此类问题，常用的手段就是引入数据库中间件进行分库分表处理，比如使用 Mycat、ShadingShpere、tddl，但是这种都是过去式了，现在使用分布式数据库可以避免分库分表<br/>为什么不建议分库分表呢？<br/>分库分表以后，会面临以下问题<br/><br/>分页问题，例如：使用传统写法，随着页数过大性能会急剧下降<br/>分布式事务问题<br/>数据迁移问题，例如：需要把现有数据通过分配算法导入到所有的分库中<br/>数据扩容问题，分库分表的数据总有一天也会到达极限，需要增大分片<br/>开发模式变化，比如在请求数据时，需要带分片键，否则就会导致所有节点执行<br/>跨库跨表查询问题<br/>业务需要进行一定取舍，由于分库分表的局限性，有些场景下需要业务进行取舍<br/><br/>以上只是列举了一部分问题，为了避免这些问题，可以使用分布式数据库TiDB来处理<br/>TiDB介绍<br/>TiDB 是 PingCAP 公司研发的一款开源分布式关系型数据库，从 2015年 9 月开源，至今已经有9 年时间，可以说已经非常成熟，它是一款同时支持OLTP（在线事务处理）和OLAP（在线分析处理）的融合型分布式数据库产品，具备水平扩缩容，金融级高可用、实时 HTAP（Hybrid Transactional and Analytical Processing）、云原生的分布式数据库，兼容 MySQL 5.7 协议和 MySQL 生态等重要特性，它适合高可用、强一致要求较高、数据规模较大等各种应用场景。<br/>核心特性<br/><br/>金融级高可用<br/>在线水平扩容或者缩容，并且存算分离<br/>云原生的分布式数据库，支持部署在公有云，私有云，混合云中<br/>实时HTAP，提供TIKV行存储引擎和TiFlash列存储引擎<br/>兼容MySQL协议和MySQL生态<br/>分布式事务强一致性<br/>从 MySQL 无缝切换到 TiDB，几乎无需修改代码，迁移成本极低<br/>PD在分布式理论CAP方面满足CP，是强一致性的<br/><br/>应用场景<br/><br/>对数据一致性及高可靠、系统高可用、可扩展性、容灾要求较高的金融行业属性的场景<br/>对存储容量、可扩展性、并发要求较高的海量数据及高并发的OLTP场景<br/>数据汇聚、二次加工处理的场景<br/><br/>案例<br/>TiDB 有1500 多家不同行业的企业应用在了生产环境，以下是一些有代表性企业，要想查看更多案例，可以访问TiDB 官网查询<br/><img src=\"https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/e0ad8f2641d14bfda63e2154793cae4f~tplv-k3u1fbpfcp-jj-mark:3024:0:0:0:q75.awebp#?w=2560&amp;h=502&amp;s=300004&amp;e=png&amp;b=ffffff\"/><img src=\"http://localhost:9090/files/1711932203538-image.png\" style=\"max-width:100%;\" contenteditable=\"false\"/><br/>系统架构<br/><img src=\"https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/6498fa4970f94a54802ff556eba13068~tplv-k3u1fbpfcp-jj-mark:3024:0:0:0:q75.awebp#?w=1398&amp;h=900&amp;s=118169&amp;e=png&amp;b=ffffff\"/><img src=\"http://localhost:9090/files/1711932219055-image.png\" style=\"max-width:100%;\" contenteditable=\"false\"/><br/>TIDB Server<br/>SQL 层，对外暴露 MySQL 协议的连接 endpoint，负责接收SQL请求，处理SQL相关的逻辑，并通过PD找到存储计算所需数据的TiKV地址，与TiKV交互获取数据，最终返回结果。TiDB Server 是无状态的，其本身并不存储数据，只负责计算，可以无限水平扩展，可以通过负载均衡组件（LVS、HAProxy或F5）对外提供统一的接入地址，客户端的连接可以均匀地分摊在多个 TiDB 实例上以达到负载均衡的效果。<br/>PD Server<br/>整个集群的管理模块，其主要工作有三个：<br/><br/>存储集群的元信息（某个Key存储在那个TiKV节点）；<br/>对TiKV集群进行调度和负载均衡、Leader选举；<br/>分配全局唯一且递增的事务ID。<br/><br/>PD 是一个集群，需要部署奇数个节点，一般线上推荐至少部署3个节点。PD在选举的过程中无法对外提供服务，这个时间大约是3秒。<br/>TIKV Server<br/><img src=\"https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/3fd06f53d61047a3b4e5cadf8107c978~tplv-k3u1fbpfcp-jj-mark:3024:0:0:0:q75.awebp#?w=1402&amp;h=694&amp;s=147427&amp;e=png&amp;b=fdfdfd\"/><img src=\"http://localhost:9090/files/1711932242908-image.png\" style=\"max-width:100%;\" contenteditable=\"false\"/><br/>TiDB 现在同时支持OLTP 和 OLAP，而TiKV负责存储OLTP数据，从外部看TiKV是一个分布式的提供事务的Key-Value存储引擎。存储数据的基本单位是Region，每个Region负责存储一个Key Range（从StartKey到EndKey的左闭右开区间）的数据，每个TiKV节点会负责多个Region。<br/>TiKV如何做到数据不丢失的？<br/><img src=\"https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/0d163606b88c4afa84c292d9a5828354~tplv-k3u1fbpfcp-jj-mark:3024:0:0:0:q75.awebp#?w=832&amp;h=554&amp;s=58934&amp;e=png&amp;b=fdfdfd\"/><img src=\"http://localhost:9090/files/1711932253641-image.png\" style=\"max-width:100%;\" contenteditable=\"false\"/><br/>简单理解，就是把数据复制到多台机器上，这样一个节点down 机，其他节点上的副本还能继续提供服务；复杂理解，需要这个数据可靠并且高效复制到其他节点，并且能处理副本失效的情况，那怎么做呢，就是使用 Raft一致性算法<br/>Region 与副本之间通过 Raft 协议来维持数据一致性，任何写请求都只能在 Leader 上写入，并且需要写入多数副本后（默认配置为 3 副本，即所有请求必须至少写入两个副本成功）才会返回客户端写入成功。<br/>分布式事务支持<br/>TiKV 支持分布式事务，我们可以一次性写入多个 key-value 而不必关心这些 key-value 是否处于同一个数据切片 (Region) 上，TiKV 的分布式事务参考了Google 在 BigTable 中使用的事务模型Percolator，具体可以访问论文了解<br/>与MySQL的对比<br/>支持的特性<br/><br/>支持分布式事务，原理是基于Google Percolator，Percolator是基于Bigtable的，所以数据结构直接使用了Bigtable的Tablet。详情可参考zhuanlan.zhihu.com/p/39896539<br/>支持锁，TIDB是乐观锁 +MVCC ，MySQL是悲观锁+MVCC，要注意TIDB执行Update、Insert、Delete时不会检查冲突，只有在提交时才会检查写写冲突，所以在业务端执行SQL语句后，要注意检查返回值，即使执行没有出错，提交的时候也可能出错。<br/><br/>不支持的功能特性<br/><br/>不支持存储过程、函数、触发器<br/>自增id只支持在单个TIDB Server的自增，不支持多个TIDB Server的自增。<br/>外键约束<br/>临时表<br/>Mysql追踪优化器<br/>XA 语法（TiDB 内部使用两阶段提交，但并没有通过 SQL 接口公开）<br/><br/>资源使用情况<br/>以下内容参考：pingcap.medium.com/an-8x-syste…<br/>TiDB 具有很高的数据压缩比，MySQL 中的 10.8 TB 数据在 TiDB 中变成了 3.2 TB，还是三副本的总数据量。因此，MySQL 与 TiDB 的空间使用比例为 3.4:1。<br/><img src=\"https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/728fc136231d4ce0a50cb54241bc2e23~tplv-k3u1fbpfcp-jj-mark:3024:0:0:0:q75.awebp#?w=586&amp;h=250&amp;s=23600&amp;e=png&amp;b=ffffff\"/><img src=\"http://localhost:9090/files/1711932285842-image.png\" style=\"max-width:100%;\" contenteditable=\"false\"/><br/>同等量级，使用2 年以后，资源使用情况<br/><br/>MySQL使用32 个节点，而 TiDB 只有 14 个<br/>MySql 用了 512 个 CPU 核心，而 TiDB 将仅使用 224 个，不到 MySQL 的一半。<br/>MySQL 使用 48 TB 存储空间，而 TiDB 将使用 16 TB，仅为 MySQL 的 1/3。<br/><img src=\"https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/1ed7dd3569044603ba72713f4d89bb25~tplv-k3u1fbpfcp-jj-mark:3024:0:0:0:q75.awebp#?w=1000&amp;h=710&amp;s=167053&amp;e=png&amp;b=fefefe\"/><img src=\"http://localhost:9090/files/1711932302680-image.png\" style=\"max-width:100%;\" contenteditable=\"false\"/><br/><br/><img src=\"https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/16e35e7056ca4bb0a396420803ff3a1b~tplv-k3u1fbpfcp-jj-mark:3024:0:0:0:q75.awebp#?w=984&amp;h=662&amp;s=129751&amp;e=png&amp;b=fefefe\"/><img src=\"http://localhost:9090/files/1711932312842-image.png\" style=\"max-width:100%;\" contenteditable=\"false\"/><br/>性能测试<br/>测试报告 1<br/>来源：www.percona.com/blog/a-quic…<br/>五个 ecs 实例，使用了不同配置，以此测试<br/><br/>t2.medium：2 个 CPU 核心<br/>x1e.xlarge：4 个 CPU 核心<br/>r4.4xlarge：16 个 CPU 核心<br/>m4.16xlarge：64 个 CPU 核心<br/>m5.24xlarge：96 个 CPU 核心<br/><br/>MySQL 中的数据库大小为 70Gb，TiDB 中的数据库大小为 30Gb（压缩）。该表没有二级索引（主键除外）。<br/>测试用例<br/><br/><br/>简单计数(*):<br/>sql复制代码 select count(*) from ontime;<br/><br/><br/><br/>简单分组依据<br/>sql复制代码 select count(*), year from ontime group by year order by year;<br/><br/><br/><br/>用于全表扫描的复杂过滤器<br/>sql复制代码select * from ontime where UniqueCarrier = \'DL\' and TailNum = \'N317NB\' and FlightNum = \'2\' and Origin = \'JFK\' and Dest = \'FLL\' limit 10;<br/><br/><br/><br/>复杂的分组依据和排序依据查询<br/>sql复制代码select SQL_CALC_FOUND_ROWS <br/>FlightDate, UniqueCarrier as carrier,<br/>FlightNum, <br/>Origin, <br/>Dest <br/>FROM ontime <br/>WHERE <br/>DestState not in (\'AK\', \'HI\', \'PR\', \'VI\')<br/>and OriginState not in (\'AK\', \'HI\', \'PR\', \'VI\')<br/>and flightdate &gt; \'2015-01-01\' <br/>and ArrDelay &lt; 15 <br/>and cancelled = 0 and Diverted = 0  <br/>and DivAirportLandings = \'0\'    <br/>ORDER by DepDelay DESC<br/>LIMIT 10;<br/><br/>下图表示结果（条形表示查询响应时间，越小越好）：<br/><img src=\"https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/43cd68d5c93b441580bc0d463cb316da~tplv-k3u1fbpfcp-jj-mark:3024:0:0:0:q75.awebp#?w=1550&amp;h=940&amp;s=162447&amp;e=png&amp;b=fefefe\"/><img src=\"http://localhost:9090/files/1711932334152-image.png\" style=\"max-width:100%;\" contenteditable=\"false\"/><br/><br/><br/>系统基准测试<br/>在 m4.16xlarge 实例上使用 Sysbench 进行点选择（意味着通过主键选择一行，线程范围从 1 到 128）（内存限制：无磁盘读取）。结果在这里。条形代表每秒的交易数量，越多越好：<br/><img src=\"https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/7b3b13c1b2974f74828099b9c9622897~tplv-k3u1fbpfcp-jj-mark:3024:0:0:0:q75.awebp#?w=1684&amp;h=596&amp;s=103647&amp;e=png&amp;b=fefefe\"/><img src=\"http://localhost:9090/files/1711932353335-image.png\" style=\"max-width:100%;\" contenteditable=\"false\"/><br/>系统测试报告 2<br/>来源：www.dcits.com/show-269-41…<br/>硬件配置<br/><img src=\"https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/2ee01b33382740cd9525671ccd1ee2f1~tplv-k3u1fbpfcp-jj-mark:3024:0:0:0:q75.awebp#?w=1388&amp;h=284&amp;s=48899&amp;e=png&amp;b=fcfcfc\"/><img src=\"http://localhost:9090/files/1711932376341-image.png\" style=\"max-width:100%;\" contenteditable=\"false\"/><br/><br/><img src=\"https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/71b2488ed4cf4cb7836aba137ed20c9c~tplv-k3u1fbpfcp-jj-mark:3024:0:0:0:q75.awebp#?w=1358&amp;h=464&amp;s=148672&amp;e=png&amp;b=fdfdfd\"/><img src=\"http://localhost:9090/files/1711932390252-image.png\" contenteditable=\"false\" style=\"font-size: 14px; max-width: 100%;\"/></p><p>测试场景</p><p><img src=\"https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/4265b02792dd435aa658581aa928e79f~tplv-k3u1fbpfcp-jj-mark:3024:0:0:0:q75.awebp#?w=1402&amp;h=418&amp;s=77545&amp;e=png&amp;b=fdfdfd\"/><img src=\"http://localhost:9090/files/1711932400415-image.png\" style=\"max-width:100%;\" contenteditable=\"false\"/><br/><br/>测试分两阶段进行，第一阶段测试数据为100万单，第二阶段测试数据为1300万单。在此基础上，使用Jmeter压力测试10万单结果如下：<br/><img src=\"https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/32a250a348354ceb925075fea52b7aaf~tplv-k3u1fbpfcp-jj-mark:3024:0:0:0:q75.awebp#?w=1420&amp;h=474&amp;s=325783&amp;e=png&amp;b=fcfbfb\"/><img src=\"http://localhost:9090/files/1711932416565-image.png\" style=\"max-width:100%;\" contenteditable=\"false\"/><br/><img src=\"https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/eebc441dbfd34aeead3a14c5a5320f13~tplv-k3u1fbpfcp-jj-mark:3024:0:0:0:q75.awebp#?w=1410&amp;h=500&amp;s=362629&amp;e=png&amp;b=fcfafa\"/><img src=\"http://localhost:9090/files/1711932424721-image.png\" style=\"max-width:100%;\" contenteditable=\"false\"/><br/>从测试结果来看，在小数据量mysql性能是好于TiDB，因为 TiDB 是分布式架构，如果小数据量，在网络通讯节点分发一致性等方面花的时间就很多，然后各个节点执行完还要汇总返回，所以开销是比较大的，但是数据量一上来TiDB 优势就体现出来了，所以如果数据量比较小，没必要使用 TiDB<br/>总结<br/>以上介绍了 TiDB架构，以及它的一些特性，同时也与 mysql 进行了对比，如果贵司的数据量比较大，正在考虑要分库分表，那么完全可以使用它，来避免分库分表，分库分表是一个过渡方案，使用分布式数据库才是终极方案。同时如果贵司的数据量比较小，那么就没必要引入了<br/><br/>作者：dweizhao<br/>链接：<a href=\"https://juejin.cn/post/7329413905028579340\" target=\"_blank\">https://juejin.cn/post/7329413905028579340</a><br/>来源：稀土掘金<br/>著作权归作者所有。商业转载请联系作者获得授权，非商业转载请注明出处。<br/></p>', '分布式数据库', 'http://localhost:9090/files/1711960229966-v2-a5894a797a381e2666b5a32b24118eeb_r.jpg', '[\"后端\"]', 14, '2024-04-01', 94, 1);
INSERT INTO `blog` VALUES (13, '云原生 Meetup 杭州站', '<p>此次 Meetup 由 KubeSphere 社区联合 ByConity 社区共同组织，我们邀请到了来自字节跳动、中移（苏州）软件技术有限公司、之江实验室、大连易衡科技有限公司等企业的专家们，为社区的小伙伴们带来精彩的技术分享。<br/></p><p><img src=\"http://localhost:9090/files/1712410842916-image.png\" style=\"max-width:100%;\" contenteditable=\"false\"/></p>', '此次 Meetup 由 KubeSphere 社区联合 ByConity 社区共同组织，我们邀请到了来自字节跳动、中移（苏州）软件技术有限公司、之江实验室、大连易衡科技有限公司等企业的专家们，为社区的小伙伴们带来精彩的技术分享。', NULL, '[]', 1, '2024-04-06', 33, 18);

-- ----------------------------
-- Table structure for blog_copy1
-- ----------------------------
DROP TABLE IF EXISTS `blog_copy1`;
CREATE TABLE `blog_copy1`  (
  `id` int(11) NOT NULL AUTO_INCREMENT COMMENT 'ID',
  `title` varchar(255) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci NULL DEFAULT NULL COMMENT '标题',
  `content` longtext CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci NULL COMMENT '内容',
  `descr` varchar(255) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci NULL DEFAULT NULL COMMENT '简介',
  `cover` varchar(255) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci NULL DEFAULT NULL COMMENT '封面',
  `tags` varchar(255) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci NULL DEFAULT NULL COMMENT '标签',
  `user_id` int(11) NULL DEFAULT NULL COMMENT '发布人ID',
  `date` varchar(255) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci NULL DEFAULT NULL COMMENT '发布日期',
  `read_count` int(11) NULL DEFAULT 0 COMMENT '浏览量',
  `category_id` int(11) NULL DEFAULT NULL COMMENT '分类ID',
  PRIMARY KEY (`id`) USING BTREE
) ENGINE = InnoDB AUTO_INCREMENT = 14 CHARACTER SET = utf8mb4 COLLATE = utf8mb4_unicode_ci COMMENT = '博客信息' ROW_FORMAT = DYNAMIC;

-- ----------------------------
-- Records of blog_copy1
-- ----------------------------
INSERT INTO `blog_copy1` VALUES (1, 'mysql高级篇', '<p>1111</p>', '重点介绍索引，sql优化以及mysql的底层', 'http://localhost:9090/files/1710470452054-OIP (23).jpg', '[\"后端\",\"面试\"]', 10, '2023-09-10', 33, 1);
INSERT INTO `blog_copy1` VALUES (2, '聊聊我的前端面试心得', '<p>最近的面试中有一个面试官问我按钮级别的权限怎么控制，我说直接v-if啊，他说不够好，我说我们项目中按钮级别的权限控制情况不多，所以v-if就够了，他说不够通用，最后他对我的评价是做过很多东西，但是都不够深入，好吧，那今天我们就来深入深入。</p><p><br/>因为我自己没有相关实践，所以接下来就从这个有16.2k星星的后台管理系统项目Vue vben admin中看看它是如何做的。</p><p><br/></p><p>要做权限控制，肯定需要一个<code>code</code>，无论是权限码还是角色码都可以，一般后端会一次性返回，然后全局存储起来就可以了，<code>Vue vben admin</code>是在登录成功以后获取并保存到全局的<code>store</code>中：</p><pre><code class=\"JavaScript\"><span class=\"hljs-keyword\">import</span> { defineStore } <span class=\"hljs-keyword\">from</span> <span class=\"hljs-string\">\'pinia\'</span>;\n<span class=\"hljs-keyword\">export</span> <span class=\"hljs-keyword\">const</span> usePermissionStore = <span class=\"hljs-title function_\">defineStore</span>({\n<span class=\"hljs-attr\">state</span>: () =&amp;gt; ({\n<span class=\"hljs-comment\">// 权限代码列表</span>\n<span class=\"hljs-attr\">permCodeList</span>: [],\n}),\n<span class=\"hljs-attr\">getters</span>: {\n<span class=\"hljs-comment\">// 获取</span>\n<span class=\"hljs-title function_\">getPermCodeList</span>(<span class=\"hljs-params\"></span>){\n<span class=\"hljs-keyword\">return</span> <span class=\"hljs-variable language_\">this</span>.<span class=\"hljs-property\">permCodeList</span>;\n},\n},\n<span class=\"hljs-attr\">actions</span>: {\n<span class=\"hljs-comment\">// 存储</span>\n<span class=\"hljs-title function_\">setPermCodeList</span>(<span class=\"hljs-params\">codeList</span>) {\n<span class=\"hljs-variable language_\">this</span>.<span class=\"hljs-property\">permCodeList</span> = codeList;\n},\n\n<span class=\"hljs-comment\">// 请求权限码</span>\n<span class=\"hljs-keyword\">async</span> <span class=\"hljs-title function_\">changePermissionCode</span>(<span class=\"hljs-params\"></span>) {\n<span class=\"hljs-keyword\">const</span> codeList = <span class=\"hljs-keyword\">await</span> <span class=\"hljs-title function_\">getPermCode</span>();\n<span class=\"hljs-variable language_\">this</span>.<span class=\"hljs-title function_\">setPermCodeList</span>(codeList);\n}\n}\n})</code></pre><p>1111</p>', '最近的面试中有一个面试官问我按钮级别的权限怎么控制，最近的面试中有一个面试官问我按钮级别的权限怎么控制，最近的面试中有一个面试官问我按钮级别的权限怎么控制，', 'http://localhost:9090/files/1712407950576-微信截图_20231117155534.png', '[\"前端\",\"面试\"]', 11, '2023-09-17', 113, 2);
INSERT INTO `blog_copy1` VALUES (3, '你的代码不堪一击！太烂了！', '<p>小王，你的页面白屏了，赶快修复一下。小王排查后发现是服务端传回来的数据格式不对导致，无数据时传回来不是 [] 而是 null, 从而导致 forEach 方法报错导致白屏，于是告诉测试，这是服务端的错误导致，要让服务端来修改，结果测试来了一句：“服务端返回数据格式错误也不能白屏！！” “好吧，千错万错都是前端的错。” 小王抱怨着把白屏修复了。</p><p><br/>刚过不久，老李喊道：“小王，你的组件又渲染不出来了。” 小王不耐烦地过来去看了一下，“你这个属性data 格式不对，要数组，你传个对象干嘛呢。”老李反驳： “ 就算 data 格式传错，也不应该整个组件渲染不出来，至少展示暂无数据吧！” “行，你说什么就是什么吧。” 小王又抱怨着把问题修复了。</p><p><br/>类似场景，小王时不时都要经历一次，久而久之，大家都觉得小王的技术太菜了。小王听到后，倍感委屈：“这都是别人的错误，反倒成为我的错了！”</p><p><br/>等到小王离职后，我去看了一下他的代码，的确够烂的，不堪一击！太烂了！下面来吐槽一下。<br/><br/></p>', '小王，你的页面白屏了，赶快修复一下。', 'http://localhost:9090/files/1712407938007-微信截图_20231117154820.png', '[\"后端\",\"Java\",\"面试\"]', 10, '2023-09-10', 274, 1);
INSERT INTO `blog_copy1` VALUES (4, '程序员更需要钝感力', '<p>讲一个大多数同学都会遇到的事，之前在一家单位随着部门发展，空降了个老大哥（前端领导）。怎么说呢那个时候自己陷入了一个极其痛苦的时期，他呢每天都很闲不干活，活呢都交给我跟另外一个哥们干，而且功劳还是他的。我很不爽，当我跟我对象说这个事的时候，她说谁让人家是领导呢！！现在再总结的时候发现好像都释怀了，那个时候每天晚上失眠睡不着。<br/><br/>那个时候痛苦的点是：<br/><br/>1. 身为领导不作为。<br/>2. 身为领导技术能力不行。<br/>3. 把我的产出都当作自己的汇报给领导。<br/><br/>其实那个时候或多或少会跟他对着干，我对象也跟我聊过这个事说不要跟领导对着干，人家是领导不干活就不干活了。好像确实没落到什么好处，最后还是人家啥活不干，痛苦的还是自己。还是要学会向上管理。 <br/>都是打工的，工期是按照人日排的，就是换个领导，怎么着你都要干活的啊！谁让你不是领导呢。</p><p>&nbsp; <br/>到现在听到有吐槽领导会不干活、技术能力不行、功劳是自己的，锅都是我的一些吐槽。我都会笑笑不说什么，其实反过来想领导的位置不允许犯错，一般当领导的年龄都很大了（可能不是那么容易找到那么符合预期的工作了），假如再犯一些低级的错误，会被领导的领导不信任等。你如果能跟领导相处很好，就是犯错了锅是你的，最后你得绩效还是好的。</p><p><br/>领导积极管理组织分享、一块搞些新奇的东西也好，不作为也好，干好自己的工作积极响应，自己擅长的领域就好好发挥，管他结果是啥呢，大家都聪明人，都看得明白的。有时间了就学点新东西，都是打工的，没必要搞得都心里不舒服，凡事多多人情世故下 哈哈 真不爽了离开就是了。<br/><br/></p>', '程序员每个人都是聪明的，都是反应灵敏的。 一个同事说过这么一句话：\"都当的了程序员，大家都是聪明人，不过有些事不好意思点破罢了，他要是真的太过分，就真的撕破脸！\"。', 'http://localhost:9090/files/1710682031312-微信截图_20231117155534.png', '[\"程序员\",\"综合\"]', 12, '2023-09-17', 8, 5);
INSERT INTO `blog_copy1` VALUES (5, 'XSS攻击', '<p>XSS 攻击：即跨站脚本攻击，它是 Web 程序中常见的漏洞。原理是攻击者往 Web 页面里插入恶意的脚本代码（css 代码、Javascript 代码等），当用户浏览该页面时，嵌入其中的脚本代码会被执行，从而达到恶意攻击用户的目的，如盗取用户 cookie、破坏页面结构、重定向到其他网站等。</p><p>预防 XSS 的核心是必须对输入的数据做过滤处理。</p>', '主要介绍XSS攻击', 'http://localhost:9090/files/1710484008493-OIP (25).jpg', '[\"后端\",\"Java\",\"面试\"]', 15, '2023-09-10', 7, 1);
INSERT INTO `blog_copy1` VALUES (6, 'spring mvc 和 struts 的区别', '<div><ul><li>拦截级别：struts2 是类级别的拦截；spring mvc 是方法级别的拦截。</li><li>数据独立性：spring mvc 的方法之间基本上独立的，独享 request 和 response 数据，请求数据通过参数获取，处理结果通过 ModelMap 交回给框架，方法之间不共享变量；而 struts2 虽然方法之间也是独立的，但其所有 action 变量是共享的，这不会影响程序运行，却给我们编码和读程序时带来了一定的麻烦。</li><li>拦截机制：struts2 有以自己的 interceptor 机制，spring mvc 用的是独立的 aop 方式，这样导致struts2 的配置文件量比 spring mvc 大。</li><li>对 ajax 的支持：spring mvc 集成了ajax，所有 ajax 使用很方便，只需要一个注解 @ResponseBody 就可以实现了；而 struts2 一般需要安装插件或者自己写代码才行。</li></ul></div><p><img src=\"http://localhost:9090/files/1710509243180-anime-Jojo-2187539.jpg\" style=\"max-width:100%;\" contenteditable=\"false\" width=\"330.88\" height=\"139.58\"/><br/></p>', 'spring mvc 和 struts 的区别是什么', 'http://localhost:9090/files/1710486891445-coffee-791439_1920.jpg', '[\"后端\",\"Java\",\"面试\"]', 13, '2023-10-10', 7, 1);
INSERT INTO `blog_copy1` VALUES (7, '111', '', '111', 'http://localhost:9090/files/1710662201469-QQ截图20230627022254.png', '[\"小白\"]', 13, '2024-03-16', 9, 4);
INSERT INTO `blog_copy1` VALUES (8, '2W字全面剖析Mybatis中的9种设计模式', '<div id=\"article-root\" itemprop=\"articleBody\" class=\"article-viewer markdown-body cache result\" data-v-536a572c=\"\"><style>.markdown-body{color:#595959;font-size:15px;font-family:-apple-system,system-ui,BlinkMacSystemFont,Helvetica Neue,PingFang SC,Hiragino Sans GB,Microsoft YaHei,Arial,sans-serif;background-image:linear-gradient(90deg,rgba(60,10,30,.04) 3%,transparent 0),linear-gradient(1turn,rgba(60,10,30,.04) 3%,transparent 0);background-size:20px 20px;background-position:50%}.markdown-body p{color:#595959;font-size:15px;line-height:2;font-weight:400}.markdown-body p+p{margin-top:16px}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{padding:30px 0;margin:0;color:#135ce0}.markdown-body h1{position:relative;text-align:center;font-size:22px;margin:50px 0}.markdown-body h1:before{position:absolute;content:\"\";top:-10px;left:50%;width:32px;height:32px;transform:translateX(-50%);background-size:100% 100%;opacity:.36;background-repeat:no-repeat;background:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAMAAABEpIrGAAAABGdBTUEAALGPC/xhBQAAACBjSFJNAAB6JgAAgIQAAPoAAACA6AAAdTAAAOpgAAA6mAAAF3CculE8AAABfVBMVEX///8Ad/8AgP8AgP8AgP8Aff8AgP8Af/8AgP8AVf8Af/8Af/8AgP8AgP8Af/8Afv8AAP8Afv8Afv8Aef8AgP8AdP8Afv8AgP8AgP8Acf8Ae/8AgP8Af/8AgP8Af/8Af/8AfP8Afv8AgP8Af/8Af/8Afv8Afv8AgP8Afv8AgP8Af/8Af/8AgP8AgP8Afv8AgP8Af/8AgP8AgP8AgP8Ae/8Afv8Af/8AgP8Af/8AgP8Af/8Af/8Aff8Af/8Abf8AgP8Af/8AgP8Af/8Af/8Afv8AgP8AgP8Afv8Afv8AgP8Af/8Aff8AgP8Afv8AgP8Aff8AgP8AfP8AgP8Ae/8AgP8Af/8AgP8AgP8AgP8Afv8AgP8AgP8AgP8Afv8AgP8AgP8AgP8AgP8AgP8Af/8AgP8Af/8Af/8Aev8Af/8AgP8Aff8Afv8AgP8AgP8AgP8Af/8AgP8Af/8Af/8AgP8Afv8AgP8AgP8AgP8AgP8Af/8AeP8Af/8Af/8Af//////rzEHnAAAAfXRSTlMAD7CCAivatxIDx5EMrP19AXdLEwgLR+6iCR/M0yLRzyFF7JupSXn8cw6v60Q0QeqzKtgeG237HMne850/6Qeq7QaZ+WdydHtj+OM3qENCMRYl1B3K2U7wnlWE/mhlirjkODa9FN/BF7/iNV/2kASNZpX1Wlf03C4stRGxgUPclqoAAAABYktHRACIBR1IAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAB3RJTUUH4gEaBzgZ4yeM3AAAAT9JREFUOMvNUldbwkAQvCAqsSBoABE7asSOBRUVVBQNNuy9996789+9cMFAMHnVebmdm+/bmdtbQv4dOFOW2UjPzgFyLfo6nweKfIMOBYWwFtmMPGz2Yj2pJI0JDq3udJW6VVbmKa9I192VQFV1ktXUAl5NB0cd4KpnORqsEO2ZIRpF9gJfE9Dckqq0KuZt7UAH5+8EPF3spjsRpCeQNO/tA/qDwIDA+OCQbBoKA8NOdjMySgcZGVM6jwcgRuUiSs0nlPFNSrEpJfU0jTLD6llqbvKxei7OzvkFNQohi0vAsj81+MoqsCaoPOQFgus/1LyxichW+hS2JWCHZ7VlF9jb187pIAYcHiViHAMnp5mTjJ8B5xeEXF4B1ze/fTh/C0h398DDI9HB07O8ci+vRBdvdGnfP4gBuM8vw7X/G3wDmFhFZEdxzjMAAAAldEVYdGRhdGU6Y3JlYXRlADIwMTgtMDEtMjZUMDc6NTY6MjUrMDE6MDA67pVWAAAAJXRFWHRkYXRlOm1vZGlmeQAyMDE4LTAxLTI2VDA3OjU2OjI1KzAxOjAwS7Mt6gAAABl0RVh0U29mdHdhcmUAd3d3Lmlua3NjYXBlLm9yZ5vuPBoAAAAWdEVYdFRpdGxlAGp1ZWppbl9sb2dvIGNvcHlxapmKAAAAV3pUWHRSYXcgcHJvZmlsZSB0eXBlIGlwdGMAAHic4/IMCHFWKCjKT8vMSeVSAAMjCy5jCxMjE0uTFAMTIESANMNkAyOzVCDL2NTIxMzEHMQHy4BIoEouAOoXEXTyQjWVAAAAAElFTkSuQmCC)}.markdown-body h2{position:relative;font-size:20px;border-left:4px solid;padding:0 0 0 10px;margin:30px 0}.markdown-body h3{font-size:16px}.markdown-body ul{list-style:disc outside;margin-left:2em;margin-top:1em}.markdown-body li{line-height:2;color:#595959}.markdown-body img.loaded{margin:0 auto;display:block}.markdown-body blockquote{background:#fff9f9;margin:2em 0;padding:2px 20px;border-left:4px solid #b2aec5}.markdown-body blockquote p{color:#666;line-height:2}.markdown-body a{color:#036aca;border-bottom:1px solid rgba(3,106,202,.8);font-weight:400;text-decoration:none}.markdown-body em strong,.markdown-body strong{color:#036aca}.markdown-body hr{border-top:1px solid #135ce0}.markdown-body pre{overflow:auto}.markdown-body code,.markdown-body pre{overflow:auto;position:relative;line-height:1.75;font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre>code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body table{border-collapse:collapse;margin:1rem 0;overflow-x:auto}.markdown-body table td,.markdown-body table th{border:1px solid #dfe2e5;padding:.6em 1em}.markdown-body table tr{border-top:1px solid #dfe2e5}.markdown-body table tr:nth-child(2n){background-color:#f6f8fa}</style><style data-highlight=\"\">.markdown-body pre,.markdown-body pre>code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>在学习设计模式的过程中，我们大多数还是只停留在概念层面，很少有机会能在实际开发中用到，任何一个知识点，如果我们不能达到至少从2个方面去窥探它的话，很难真正去理解它。</p>\n<p>而阅读优秀框架的源码是我们窥探设计模式很好的途径，在Mybatis中用到了大概有9种设计模式：</p>\n<ol>\n<li>Builder模式</li>\n<li>工厂模式</li>\n<li>单例模式</li>\n<li>代理模式</li>\n<li>组合模式</li>\n<li>模板方法模式</li>\n<li>适配器模式</li>\n<li>装饰着模式</li>\n<li>迭代器模式</li></ol>\n<p>对于23种设计模式我们并不需要刻意的记忆，而且很多设计模式的实现原理很像，只不过是名字不一样，并且如果去阅读一些框架的源码的话，可以发现其实框架对很多设计模式的实 现，都并非标准的代码实现，都做了比较多的自我改进。\n实际上，这就是所谓的灵活应用, 只借鉴不照搬, 根据具体问题针对性地去解决。</p>\n<p>软件设计模式犹如剑法一样，当哪天我们真正做到：<strong>手中无剑，心中有剑，人剑合一的境界</strong>，我们才真正理解软件设计。</p></div>', '在学习设计模式的过程中，我们大多数还是只停留在概念层面，很少有机会能在实际开发中用到，任何一个知识点，如果我们不能达到至少从2个方面去窥探它的话，很难真正去理解它。', 'http://localhost:9090/files/1710668249513-微信截图_20231117155534.png', '[\"后端\",\"Java\",\"面试\"]', 14, '2023-09-17', 34, 10);
INSERT INTO `blog_copy1` VALUES (9, '适合小公司的自动化部署脚本', '<p>背景（偷懒）<br/>在小小的公司里面，挖呀挖呀挖。快挖不动了，一件事重复个5次，还在人肉手工，身体和心理就开始不舒服了，并且违背了个人的座右铭：“偷懒”是人类进步的第一推动力。<br/>每次想要去测试环境验证个新功能，又或者被测试无情的催促着部署新版本后；都需要本地打那个200多M的jar包；以龟速般的每秒几十KB网络，通过ftp上传到服务器；用烂熟透的jps命令查找到进程，kill后，重启服务。<br/>是的，我想偷懒，想从已陷入到手工部署的沼泽地里走出来。如何救赎？<br/>自我救赎之路<br/>我的诉求很简单，想要一款“一键CI/CD的工具”，然后可以继续偷懒。为了省事，我做了以下工作<br/>找了一款停止服务的脚本，并做了小小的优化<br/>首推 陈皮大哥的停服脚本（我在里面加了个sleep 5）；脚本见下文。只需要修改 APP_MAINCLASS的变量“XXX-1.0.0.jar”替换为自己jar的名字即可，其它不用动。<br/>该脚本主要是通过jps + jar的名字获得进程号，进行kill。( 脚本很简单，注释也很详细，就不展开了，感兴趣可以阅读下，不到5分钟，写过代码的你能看懂的)<br/><br/>作者：程序员猪佩琪<br/>链接：<a href=\"https://juejin.cn/post/7257440759569055802\" target=\"_blank\">https://juejin.cn/post/7257440759569055802</a><br/>来源：稀土掘金<br/>著作权归作者所有。商业转载请联系作者获得授权，非商业转载请注明出处。<br/></p>', '在小小的公司里面，挖呀挖呀挖。快挖不动了，一件事重复个5次，还在人肉手工，身体和心理就开始不舒服了，并且违背了个人的座右铭：“偷懒”是人类进步的第一推动力。', 'http://localhost:9090/files/1710668237520-302636-106.jpg', '[\"后端\"]', 14, '2023-09-22', 38, 8);
INSERT INTO `blog_copy1` VALUES (10, '从零开始写一个Vue3+Element Plus的后台管理系统', '<div id=\"article-root\" itemprop=\"articleBody\" class=\"article-viewer markdown-body cache result\" data-v-536a572c=\"\"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre>code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:\"\"}.markdown-body blockquote>p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight=\"\" data-highlight-key=\"juejin\">.markdown-body pre,.markdown-body pre>code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id=\"heading-0\">写在开始之前</h2>\n<p>接触Vue3也有一年的时间了，除了刚开始用Vue3做了一个小小的项目，其后一直没有机会在项目中真正使用Vue3，反而一直维护Vue2的老项目。作为一个有追求（wuliao）的前端，那就自己开一个git仓库练手吧，想试验什么就随便试，既没有deadline的压力，也不用去考虑产品需求，UI还原度。</p>\n<p>萌芽期的git仓库地址 <a href=\"https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Flucidity99%2Fmocha-vue3-system\" target=\"_blank\" title=\"https://github.com/lucidity99/mocha-vue3-system\" ref=\"nofollow noopener noreferrer\">github.com/lucidity99/…</a></p>\n<h2 data-id=\"heading-1\">主要使用的工具（排名不分先后）：</h2>\n<ul class=\"contains-task-list\">\n<li class=\"task-list-item\"><input type=\"checkbox\" disabled=\"\"/> Vue3</li>\n<li class=\"task-list-item\"><input type=\"checkbox\" disabled=\"\"/> Vite</li>\n<li class=\"task-list-item\"><input type=\"checkbox\" disabled=\"\"/> TypeScript</li>\n<li class=\"task-list-item\"><input type=\"checkbox\" disabled=\"\"/> Element Plus</li>\n<li class=\"task-list-item\"><input type=\"checkbox\" disabled=\"\"/> Pinia</li>\n<li class=\"task-list-item\"><input type=\"checkbox\" disabled=\"\"/> SCSS</li>\n<li class=\"task-list-item\"><input type=\"checkbox\" disabled=\"\"/> Tailwind CSS</li>\n<li class=\"task-list-item\"><input type=\"checkbox\" disabled=\"\"/> VueRouter</li>\n<li class=\"task-list-item\"><input type=\"checkbox\" disabled=\"\"/> eCharts</li>\n<li class=\"task-list-item\"><input type=\"checkbox\" disabled=\"\"/> Eslint、Prettier</li>\n</ul>\n<p>模拟接口数据本来打算用Mockjs，后来决定使用Apipost（最终改成了apiFox），感觉更贴近实际开发，接口管理也方便。</p>\n<p>个人目前的难点是Typescript，还不能真正的把ts用好，代码动不动就爆红，所以练手的目的之一就是精进ts。</p>\n<p>计划要做的内容比较多，除了基础的系统设置、功能模块，还有一些一直想尝试但是未曾在Vue项目中完整实现的功能。</p>\n<ul class=\"contains-task-list\">\n<li class=\"task-list-item\"><input type=\"checkbox\" disabled=\"\"/> 切片上传文件</li>\n<li class=\"task-list-item\"><input type=\"checkbox\" disabled=\"\"/> 复杂的表格设置</li>\n<li class=\"task-list-item\"><input type=\"checkbox\" disabled=\"\"/> 换肤功能（目前已实现暗黑模式，但是更复杂的换肤还没有开始做）</li>\n<li class=\"task-list-item\"><input type=\"checkbox\" checked=\"\" disabled=\"\"/> 多页签组件 <a href=\"https://juejin.cn/post/7229907502900461625\" target=\"_blank\" title=\"https://juejin.cn/post/7229907502900461625\">juejin.cn/post/722990…</a></li>\n<li class=\"task-list-item\"><input type=\"checkbox\" checked=\"\" disabled=\"\"/> 各种主流富文本插件引入 <a href=\"https://juejin.cn/post/7234418257759879223\" target=\"_blank\" title=\"https://juejin.cn/post/7234418257759879223\">juejin.cn/post/723441…</a></li>\n<li class=\"task-list-item\"><input type=\"checkbox\" disabled=\"\"/> 尝试Vue3新加入的功能</li>\n<li class=\"task-list-item\"><input type=\"checkbox\" disabled=\"\"/> 尝试Vue3 hook，vueuse</li>\n<li class=\"task-list-item\"><input type=\"checkbox\" disabled=\"\"/> 路由的配置</li>\n<li class=\"task-list-item\"><input type=\"checkbox\" checked=\"\" disabled=\"\"/> 更多配置的axios拦截器 <a href=\"https://juejin.cn/post/7234078736421240869\" target=\"_blank\" title=\"https://juejin.cn/post/7234078736421240869\">juejin.cn/post/723407…</a></li>\n<li class=\"task-list-item\"><input type=\"checkbox\" disabled=\"\"/> ...</li>\n</ul>\n<p>Tailwind CSS是我很感兴趣的原子类CSS库，在以往的使用中，感觉能够实实在在的提升开发体验，后期还打算尝试现在流行的unocss</p></div>', '最近接到了百度的面试，个人觉得基础知识准备的比较充分，就去网上找了一些百度的面经...', 'http://localhost:9090/files/1710681977175-微信截图_20231117155235.png', '[\"前端\"]', 10, '2023-09-17', 39, 2);
INSERT INTO `blog_copy1` VALUES (11, '一次令人窒息的百度面试', '<h1>看简历</h1><p>上来首先是万年不变的自我介绍，介绍完之后面试官就开始逐行看我的简历，并针对简历上的项目经历进行询问。询问的十分详细。</p><h1>如何实现新手指引</h1><p>问这个问题的原因是我简历上写到了使用driver.js库实现了新手指引。</p><p><br/></p><p>实现思路是：<br/><br/>点击“开始指引”：找到id为mask的元素，为该元素添加蒙层样式（setMask）<br/>添加提示信息：找到id为tip的元素，将提示信息添加为该元素的子元素(setTip)<br/>高亮当前步骤元素：找到当前目标元素，克隆目标元素，然后将克隆后的目标元素添加为curStepMask的子元素(setTip)<br/>定位tip和curStepMask的元素：curStepMask元素在当前目标元素的正上方，tip元素根据情况而定<br/>每次添加当前提示信息时要移除上一次添加的提示信息和覆盖元素（removeTip，removeStepMask）<br/><br/></p>', '最近接到了百度的面试，个人觉得基础知识准备的比较充分，就去网上找了一些百度的面经', 'http://localhost:9090/files/1710668162324-微信截图_20231117155458.png', '[\"后端\",\"Java\",\"面试\"]', 14, '2023-09-17', 139, 10);
INSERT INTO `blog_copy1` VALUES (12, '分库分表已成为过去式，使用分布式数据库才是未来', '<p>转载至我的博客 www.infrastack.cn ，公众号：架构成长指南<br/><br/>当我们使用 Mysql数据库到达一定量级以后，性能就会逐步下降，而解决此类问题，常用的手段就是引入数据库中间件进行分库分表处理，比如使用 Mycat、ShadingShpere、tddl，但是这种都是过去式了，现在使用分布式数据库可以避免分库分表<br/>为什么不建议分库分表呢？<br/>分库分表以后，会面临以下问题<br/><br/>分页问题，例如：使用传统写法，随着页数过大性能会急剧下降<br/>分布式事务问题<br/>数据迁移问题，例如：需要把现有数据通过分配算法导入到所有的分库中<br/>数据扩容问题，分库分表的数据总有一天也会到达极限，需要增大分片<br/>开发模式变化，比如在请求数据时，需要带分片键，否则就会导致所有节点执行<br/>跨库跨表查询问题<br/>业务需要进行一定取舍，由于分库分表的局限性，有些场景下需要业务进行取舍<br/><br/>以上只是列举了一部分问题，为了避免这些问题，可以使用分布式数据库TiDB来处理<br/>TiDB介绍<br/>TiDB 是 PingCAP 公司研发的一款开源分布式关系型数据库，从 2015年 9 月开源，至今已经有9 年时间，可以说已经非常成熟，它是一款同时支持OLTP（在线事务处理）和OLAP（在线分析处理）的融合型分布式数据库产品，具备水平扩缩容，金融级高可用、实时 HTAP（Hybrid Transactional and Analytical Processing）、云原生的分布式数据库，兼容 MySQL 5.7 协议和 MySQL 生态等重要特性，它适合高可用、强一致要求较高、数据规模较大等各种应用场景。<br/>核心特性<br/><br/>金融级高可用<br/>在线水平扩容或者缩容，并且存算分离<br/>云原生的分布式数据库，支持部署在公有云，私有云，混合云中<br/>实时HTAP，提供TIKV行存储引擎和TiFlash列存储引擎<br/>兼容MySQL协议和MySQL生态<br/>分布式事务强一致性<br/>从 MySQL 无缝切换到 TiDB，几乎无需修改代码，迁移成本极低<br/>PD在分布式理论CAP方面满足CP，是强一致性的<br/><br/>应用场景<br/><br/>对数据一致性及高可靠、系统高可用、可扩展性、容灾要求较高的金融行业属性的场景<br/>对存储容量、可扩展性、并发要求较高的海量数据及高并发的OLTP场景<br/>数据汇聚、二次加工处理的场景<br/><br/>案例<br/>TiDB 有1500 多家不同行业的企业应用在了生产环境，以下是一些有代表性企业，要想查看更多案例，可以访问TiDB 官网查询<br/><img src=\"https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/e0ad8f2641d14bfda63e2154793cae4f~tplv-k3u1fbpfcp-jj-mark:3024:0:0:0:q75.awebp#?w=2560&amp;h=502&amp;s=300004&amp;e=png&amp;b=ffffff\"/><img src=\"http://localhost:9090/files/1711932203538-image.png\" style=\"max-width:100%;\" contenteditable=\"false\"/><br/>系统架构<br/><img src=\"https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/6498fa4970f94a54802ff556eba13068~tplv-k3u1fbpfcp-jj-mark:3024:0:0:0:q75.awebp#?w=1398&amp;h=900&amp;s=118169&amp;e=png&amp;b=ffffff\"/><img src=\"http://localhost:9090/files/1711932219055-image.png\" style=\"max-width:100%;\" contenteditable=\"false\"/><br/>TIDB Server<br/>SQL 层，对外暴露 MySQL 协议的连接 endpoint，负责接收SQL请求，处理SQL相关的逻辑，并通过PD找到存储计算所需数据的TiKV地址，与TiKV交互获取数据，最终返回结果。TiDB Server 是无状态的，其本身并不存储数据，只负责计算，可以无限水平扩展，可以通过负载均衡组件（LVS、HAProxy或F5）对外提供统一的接入地址，客户端的连接可以均匀地分摊在多个 TiDB 实例上以达到负载均衡的效果。<br/>PD Server<br/>整个集群的管理模块，其主要工作有三个：<br/><br/>存储集群的元信息（某个Key存储在那个TiKV节点）；<br/>对TiKV集群进行调度和负载均衡、Leader选举；<br/>分配全局唯一且递增的事务ID。<br/><br/>PD 是一个集群，需要部署奇数个节点，一般线上推荐至少部署3个节点。PD在选举的过程中无法对外提供服务，这个时间大约是3秒。<br/>TIKV Server<br/><img src=\"https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/3fd06f53d61047a3b4e5cadf8107c978~tplv-k3u1fbpfcp-jj-mark:3024:0:0:0:q75.awebp#?w=1402&amp;h=694&amp;s=147427&amp;e=png&amp;b=fdfdfd\"/><img src=\"http://localhost:9090/files/1711932242908-image.png\" style=\"max-width:100%;\" contenteditable=\"false\"/><br/>TiDB 现在同时支持OLTP 和 OLAP，而TiKV负责存储OLTP数据，从外部看TiKV是一个分布式的提供事务的Key-Value存储引擎。存储数据的基本单位是Region，每个Region负责存储一个Key Range（从StartKey到EndKey的左闭右开区间）的数据，每个TiKV节点会负责多个Region。<br/>TiKV如何做到数据不丢失的？<br/><img src=\"https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/0d163606b88c4afa84c292d9a5828354~tplv-k3u1fbpfcp-jj-mark:3024:0:0:0:q75.awebp#?w=832&amp;h=554&amp;s=58934&amp;e=png&amp;b=fdfdfd\"/><img src=\"http://localhost:9090/files/1711932253641-image.png\" style=\"max-width:100%;\" contenteditable=\"false\"/><br/>简单理解，就是把数据复制到多台机器上，这样一个节点down 机，其他节点上的副本还能继续提供服务；复杂理解，需要这个数据可靠并且高效复制到其他节点，并且能处理副本失效的情况，那怎么做呢，就是使用 Raft一致性算法<br/>Region 与副本之间通过 Raft 协议来维持数据一致性，任何写请求都只能在 Leader 上写入，并且需要写入多数副本后（默认配置为 3 副本，即所有请求必须至少写入两个副本成功）才会返回客户端写入成功。<br/>分布式事务支持<br/>TiKV 支持分布式事务，我们可以一次性写入多个 key-value 而不必关心这些 key-value 是否处于同一个数据切片 (Region) 上，TiKV 的分布式事务参考了Google 在 BigTable 中使用的事务模型Percolator，具体可以访问论文了解<br/>与MySQL的对比<br/>支持的特性<br/><br/>支持分布式事务，原理是基于Google Percolator，Percolator是基于Bigtable的，所以数据结构直接使用了Bigtable的Tablet。详情可参考zhuanlan.zhihu.com/p/39896539<br/>支持锁，TIDB是乐观锁 +MVCC ，MySQL是悲观锁+MVCC，要注意TIDB执行Update、Insert、Delete时不会检查冲突，只有在提交时才会检查写写冲突，所以在业务端执行SQL语句后，要注意检查返回值，即使执行没有出错，提交的时候也可能出错。<br/><br/>不支持的功能特性<br/><br/>不支持存储过程、函数、触发器<br/>自增id只支持在单个TIDB Server的自增，不支持多个TIDB Server的自增。<br/>外键约束<br/>临时表<br/>Mysql追踪优化器<br/>XA 语法（TiDB 内部使用两阶段提交，但并没有通过 SQL 接口公开）<br/><br/>资源使用情况<br/>以下内容参考：pingcap.medium.com/an-8x-syste…<br/>TiDB 具有很高的数据压缩比，MySQL 中的 10.8 TB 数据在 TiDB 中变成了 3.2 TB，还是三副本的总数据量。因此，MySQL 与 TiDB 的空间使用比例为 3.4:1。<br/><img src=\"https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/728fc136231d4ce0a50cb54241bc2e23~tplv-k3u1fbpfcp-jj-mark:3024:0:0:0:q75.awebp#?w=586&amp;h=250&amp;s=23600&amp;e=png&amp;b=ffffff\"/><img src=\"http://localhost:9090/files/1711932285842-image.png\" style=\"max-width:100%;\" contenteditable=\"false\"/><br/>同等量级，使用2 年以后，资源使用情况<br/><br/>MySQL使用32 个节点，而 TiDB 只有 14 个<br/>MySql 用了 512 个 CPU 核心，而 TiDB 将仅使用 224 个，不到 MySQL 的一半。<br/>MySQL 使用 48 TB 存储空间，而 TiDB 将使用 16 TB，仅为 MySQL 的 1/3。<br/><img src=\"https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/1ed7dd3569044603ba72713f4d89bb25~tplv-k3u1fbpfcp-jj-mark:3024:0:0:0:q75.awebp#?w=1000&amp;h=710&amp;s=167053&amp;e=png&amp;b=fefefe\"/><img src=\"http://localhost:9090/files/1711932302680-image.png\" style=\"max-width:100%;\" contenteditable=\"false\"/><br/><br/><img src=\"https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/16e35e7056ca4bb0a396420803ff3a1b~tplv-k3u1fbpfcp-jj-mark:3024:0:0:0:q75.awebp#?w=984&amp;h=662&amp;s=129751&amp;e=png&amp;b=fefefe\"/><img src=\"http://localhost:9090/files/1711932312842-image.png\" style=\"max-width:100%;\" contenteditable=\"false\"/><br/>性能测试<br/>测试报告 1<br/>来源：www.percona.com/blog/a-quic…<br/>五个 ecs 实例，使用了不同配置，以此测试<br/><br/>t2.medium：2 个 CPU 核心<br/>x1e.xlarge：4 个 CPU 核心<br/>r4.4xlarge：16 个 CPU 核心<br/>m4.16xlarge：64 个 CPU 核心<br/>m5.24xlarge：96 个 CPU 核心<br/><br/>MySQL 中的数据库大小为 70Gb，TiDB 中的数据库大小为 30Gb（压缩）。该表没有二级索引（主键除外）。<br/>测试用例<br/><br/><br/>简单计数(*):<br/>sql复制代码 select count(*) from ontime;<br/><br/><br/><br/>简单分组依据<br/>sql复制代码 select count(*), year from ontime group by year order by year;<br/><br/><br/><br/>用于全表扫描的复杂过滤器<br/>sql复制代码select * from ontime where UniqueCarrier = \'DL\' and TailNum = \'N317NB\' and FlightNum = \'2\' and Origin = \'JFK\' and Dest = \'FLL\' limit 10;<br/><br/><br/><br/>复杂的分组依据和排序依据查询<br/>sql复制代码select SQL_CALC_FOUND_ROWS <br/>FlightDate, UniqueCarrier as carrier,<br/>FlightNum, <br/>Origin, <br/>Dest <br/>FROM ontime <br/>WHERE <br/>DestState not in (\'AK\', \'HI\', \'PR\', \'VI\')<br/>and OriginState not in (\'AK\', \'HI\', \'PR\', \'VI\')<br/>and flightdate &gt; \'2015-01-01\' <br/>and ArrDelay &lt; 15 <br/>and cancelled = 0 and Diverted = 0  <br/>and DivAirportLandings = \'0\'    <br/>ORDER by DepDelay DESC<br/>LIMIT 10;<br/><br/>下图表示结果（条形表示查询响应时间，越小越好）：<br/><img src=\"https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/43cd68d5c93b441580bc0d463cb316da~tplv-k3u1fbpfcp-jj-mark:3024:0:0:0:q75.awebp#?w=1550&amp;h=940&amp;s=162447&amp;e=png&amp;b=fefefe\"/><img src=\"http://localhost:9090/files/1711932334152-image.png\" style=\"max-width:100%;\" contenteditable=\"false\"/><br/><br/><br/>系统基准测试<br/>在 m4.16xlarge 实例上使用 Sysbench 进行点选择（意味着通过主键选择一行，线程范围从 1 到 128）（内存限制：无磁盘读取）。结果在这里。条形代表每秒的交易数量，越多越好：<br/><img src=\"https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/7b3b13c1b2974f74828099b9c9622897~tplv-k3u1fbpfcp-jj-mark:3024:0:0:0:q75.awebp#?w=1684&amp;h=596&amp;s=103647&amp;e=png&amp;b=fefefe\"/><img src=\"http://localhost:9090/files/1711932353335-image.png\" style=\"max-width:100%;\" contenteditable=\"false\"/><br/>系统测试报告 2<br/>来源：www.dcits.com/show-269-41…<br/>硬件配置<br/><img src=\"https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/2ee01b33382740cd9525671ccd1ee2f1~tplv-k3u1fbpfcp-jj-mark:3024:0:0:0:q75.awebp#?w=1388&amp;h=284&amp;s=48899&amp;e=png&amp;b=fcfcfc\"/><img src=\"http://localhost:9090/files/1711932376341-image.png\" style=\"max-width:100%;\" contenteditable=\"false\"/><br/><br/><img src=\"https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/71b2488ed4cf4cb7836aba137ed20c9c~tplv-k3u1fbpfcp-jj-mark:3024:0:0:0:q75.awebp#?w=1358&amp;h=464&amp;s=148672&amp;e=png&amp;b=fdfdfd\"/><img src=\"http://localhost:9090/files/1711932390252-image.png\" contenteditable=\"false\" style=\"font-size: 14px; max-width: 100%;\"/></p><p>测试场景</p><p><img src=\"https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/4265b02792dd435aa658581aa928e79f~tplv-k3u1fbpfcp-jj-mark:3024:0:0:0:q75.awebp#?w=1402&amp;h=418&amp;s=77545&amp;e=png&amp;b=fdfdfd\"/><img src=\"http://localhost:9090/files/1711932400415-image.png\" style=\"max-width:100%;\" contenteditable=\"false\"/><br/><br/>测试分两阶段进行，第一阶段测试数据为100万单，第二阶段测试数据为1300万单。在此基础上，使用Jmeter压力测试10万单结果如下：<br/><img src=\"https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/32a250a348354ceb925075fea52b7aaf~tplv-k3u1fbpfcp-jj-mark:3024:0:0:0:q75.awebp#?w=1420&amp;h=474&amp;s=325783&amp;e=png&amp;b=fcfbfb\"/><img src=\"http://localhost:9090/files/1711932416565-image.png\" style=\"max-width:100%;\" contenteditable=\"false\"/><br/><img src=\"https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/eebc441dbfd34aeead3a14c5a5320f13~tplv-k3u1fbpfcp-jj-mark:3024:0:0:0:q75.awebp#?w=1410&amp;h=500&amp;s=362629&amp;e=png&amp;b=fcfafa\"/><img src=\"http://localhost:9090/files/1711932424721-image.png\" style=\"max-width:100%;\" contenteditable=\"false\"/><br/>从测试结果来看，在小数据量mysql性能是好于TiDB，因为 TiDB 是分布式架构，如果小数据量，在网络通讯节点分发一致性等方面花的时间就很多，然后各个节点执行完还要汇总返回，所以开销是比较大的，但是数据量一上来TiDB 优势就体现出来了，所以如果数据量比较小，没必要使用 TiDB<br/>总结<br/>以上介绍了 TiDB架构，以及它的一些特性，同时也与 mysql 进行了对比，如果贵司的数据量比较大，正在考虑要分库分表，那么完全可以使用它，来避免分库分表，分库分表是一个过渡方案，使用分布式数据库才是终极方案。同时如果贵司的数据量比较小，那么就没必要引入了<br/><br/>作者：dweizhao<br/>链接：<a href=\"https://juejin.cn/post/7329413905028579340\" target=\"_blank\">https://juejin.cn/post/7329413905028579340</a><br/>来源：稀土掘金<br/>著作权归作者所有。商业转载请联系作者获得授权，非商业转载请注明出处。<br/></p>', '分布式数据库', 'http://localhost:9090/files/1711960229966-v2-a5894a797a381e2666b5a32b24118eeb_r.jpg', '[\"后端\"]', 14, '2024-04-01', 93, 1);
INSERT INTO `blog_copy1` VALUES (13, '云原生 Meetup 杭州站', '<p>此次 Meetup 由 KubeSphere 社区联合 ByConity 社区共同组织，我们邀请到了来自字节跳动、中移（苏州）软件技术有限公司、之江实验室、大连易衡科技有限公司等企业的专家们，为社区的小伙伴们带来精彩的技术分享。<br/></p><p><img src=\"http://localhost:9090/files/1712410842916-image.png\" style=\"max-width:100%;\" contenteditable=\"false\"/></p>', '此次 Meetup 由 KubeSphere 社区联合 ByConity 社区共同组织，我们邀请到了来自字节跳动、中移（苏州）软件技术有限公司、之江实验室、大连易衡科技有限公司等企业的专家们，为社区的小伙伴们带来精彩的技术分享。', NULL, '[]', 1, '2024-04-06', 31, 18);

-- ----------------------------
-- Table structure for category
-- ----------------------------
DROP TABLE IF EXISTS `category`;
CREATE TABLE `category`  (
  `id` int(11) NOT NULL AUTO_INCREMENT COMMENT 'ID',
  `name` varchar(255) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci NULL DEFAULT NULL COMMENT '分类名称',
  PRIMARY KEY (`id`) USING BTREE
) ENGINE = InnoDB AUTO_INCREMENT = 22 CHARACTER SET = utf8mb4 COLLATE = utf8mb4_unicode_ci COMMENT = '博客分类' ROW_FORMAT = DYNAMIC;

-- ----------------------------
-- Records of category
-- ----------------------------
INSERT INTO `category` VALUES (2, '前端');
INSERT INTO `category` VALUES (4, '大数据');
INSERT INTO `category` VALUES (5, '代码人生');
INSERT INTO `category` VALUES (6, '算法');
INSERT INTO `category` VALUES (7, '人工智能');
INSERT INTO `category` VALUES (8, '开发工具');
INSERT INTO `category` VALUES (9, '职场经验');
INSERT INTO `category` VALUES (10, '面试');
INSERT INTO `category` VALUES (14, '旅游');
INSERT INTO `category` VALUES (16, '大学生活');
INSERT INTO `category` VALUES (17, '操作系统');
INSERT INTO `category` VALUES (18, '综合');
INSERT INTO `category` VALUES (19, '阅读');
INSERT INTO `category` VALUES (20, '其它');
INSERT INTO `category` VALUES (21, '大学学习');

-- ----------------------------
-- Table structure for collect
-- ----------------------------
DROP TABLE IF EXISTS `collect`;
CREATE TABLE `collect`  (
  `id` int(11) NOT NULL AUTO_INCREMENT COMMENT 'ID',
  `fid` int(11) NULL DEFAULT NULL COMMENT '关联ID',
  `user_id` int(11) NULL DEFAULT NULL COMMENT '点赞人ID',
  `module` varchar(255) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci NULL DEFAULT NULL COMMENT '模块',
  PRIMARY KEY (`id`) USING BTREE
) ENGINE = InnoDB AUTO_INCREMENT = 49 CHARACTER SET = utf8mb4 COLLATE = utf8mb4_unicode_ci COMMENT = '收藏' ROW_FORMAT = Dynamic;

-- ----------------------------
-- Records of collect
-- ----------------------------
INSERT INTO `collect` VALUES (26, 11, 13, '博客');
INSERT INTO `collect` VALUES (27, 10, 13, '博客');
INSERT INTO `collect` VALUES (29, 3, 1, '博客');
INSERT INTO `collect` VALUES (38, 7, 1, '活动');
INSERT INTO `collect` VALUES (39, 8, 1, '活动');
INSERT INTO `collect` VALUES (42, 3, 11, '活动');
INSERT INTO `collect` VALUES (43, 12, 14, '博客');
INSERT INTO `collect` VALUES (44, 12, 1, '博客');
INSERT INTO `collect` VALUES (45, 10, 1, '活动');
INSERT INTO `collect` VALUES (46, 4, 1, '活动');
INSERT INTO `collect` VALUES (48, 3, 1, '活动');

-- ----------------------------
-- Table structure for comment
-- ----------------------------
DROP TABLE IF EXISTS `comment`;
CREATE TABLE `comment`  (
  `id` int(11) NOT NULL AUTO_INCREMENT COMMENT 'ID',
  `content` varchar(500) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci NULL DEFAULT NULL COMMENT '内容',
  `user_id` int(11) NULL DEFAULT NULL COMMENT '评论人',
  `pid` int(11) NULL DEFAULT NULL COMMENT '父级ID',
  `root_id` int(11) NULL DEFAULT NULL COMMENT '根节点ID',
  `time` varchar(255) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci NULL DEFAULT NULL COMMENT '评论时间',
  `fid` int(11) NULL DEFAULT NULL COMMENT '关联ID',
  `module` varchar(255) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci NULL DEFAULT NULL COMMENT '模块',
  PRIMARY KEY (`id`) USING BTREE
) ENGINE = InnoDB AUTO_INCREMENT = 84 CHARACTER SET = utf8mb4 COLLATE = utf8mb4_unicode_ci COMMENT = '评论表' ROW_FORMAT = DYNAMIC;

-- ----------------------------
-- Records of comment
-- ----------------------------
INSERT INTO `comment` VALUES (1, '具体今天是星期五，好开心啊', 10, 2, 2, '2024-01-01', 10, '博客');
INSERT INTO `comment` VALUES (2, '1', 11, NULL, 2, '2023-10-01 00:53:50', 10, '博客');
INSERT INTO `comment` VALUES (3, '修改问题如下：\r\n1、什么场景下会在一次请求里会发起两次请求；\r\n2、第一次和第二次请求分别是什么，有什么区别？\r\n3、为什么浏览器有同源策略，而服务器没有？\r\n4、服务器如何配置cors。如果是nginx里如何配置，如果是nodejs后端，例如koa或者egg如何配置；\r\n5、为什么本地使用webpack进行dev开发时，访问的是127.0.0.1，但是却依然能在不需要服务器端配置cors的情况下访问到线上接口？', 12, 2, 2, '2023-10-01 23:53:30', 10, '博客');
INSERT INTO `comment` VALUES (13, '这么难的吗害怕', 11, NULL, 13, '2023-09-20 23:53:29', 10, '博客');
INSERT INTO `comment` VALUES (51, '最终会回到简单，前端的本质还是页面', 13, 2, 2, '2023-10-01 23:53:26', 10, '博客');
INSERT INTO `comment` VALUES (52, '哈哈哈哈\n', 1, NULL, 52, '2024-04-01 08:36:50', NULL, NULL);
INSERT INTO `comment` VALUES (53, '贵公司有实际的业务场景在使用吗？具体的场景是什么？使用性能如何？与MySQL相比是否解决了业务痛点？', 15, NULL, 53, '2024-04-01 09:55:50', 12, '博客');
INSERT INTO `comment` VALUES (54, '朋友他们银行分布式核心系统在用，我们目前的场景不是特别适合，我们目前用的doris', 1, 53, 53, '2024-04-01 09:58:20', 12, '博客');
INSERT INTO `comment` VALUES (55, '问场景不见得就是面试吧，抛开业务谈技术不挺扯淡吗', 10, 1, 53, '2024-04-01 09:59:20', 12, '博客');
INSERT INTO `comment` VALUES (56, '也就是3种。手动分库分表。中间件分库分表。直接数据库原生支持分布式来分库分表。', 14, NULL, 56, '2024-04-01 09:55:10', 12, '博客');
INSERT INTO `comment` VALUES (57, 'TIDB 很贵的，我们兄弟公司买了', 13, NULL, 57, '2024-04-02 09:55:10', 12, '博客');
INSERT INTO `comment` VALUES (58, '是的，确实不便宜', 1, 57, 57, '2024-04-02 11:10:35', 12, '博客');
INSERT INTO `comment` VALUES (59, '有点难', 1, NULL, 59, '2024-04-01 09:15:15', NULL, NULL);
INSERT INTO `comment` VALUES (60, '不错，真好用', 1, NULL, 60, '2024-04-01 11:47:47', NULL, NULL);
INSERT INTO `comment` VALUES (65, '我也一样（测试评论）', 1, 13, 13, '2023-09-26 12:04:18', 10, '博客');
INSERT INTO `comment` VALUES (66, '牛牛牛', 1, NULL, 66, '2024-04-01 12:04:50', NULL, NULL);
INSERT INTO `comment` VALUES (67, '111', 1, 13, 13, '2023-09-26 12:32:22', 10, '博客');
INSERT INTO `comment` VALUES (68, '222', 1, 2, 2, '2023-10-01 12:32:25', 10, '博客');
INSERT INTO `comment` VALUES (70, '是的', 1, 51, 2, '2023-10-01 12:35:49', 10, '博客');
INSERT INTO `comment` VALUES (71, '嗯嗯', 1, NULL, 71, '2024-04-01 12:36:02', NULL, NULL);
INSERT INTO `comment` VALUES (72, '哈哈哈测试', 1, NULL, 72, '2023-09-18 16:40:16', 10, '博客');
INSERT INTO `comment` VALUES (75, '哈哈哈哈哈测试', 11, 74, 74, '2023-09-18 16:54:55', 10, '博客');
INSERT INTO `comment` VALUES (76, '呵呵测试', 11, 73, 72, '2023-09-18 17:14:12', 10, '博客');
INSERT INTO `comment` VALUES (77, '测试评论', 10, NULL, 77, '2024-04-02 14:39:42', 8, '活动');
INSERT INTO `comment` VALUES (78, '666', 1, NULL, 78, '2023-09-10 19:09:03', 3, '博客');
INSERT INTO `comment` VALUES (79, '哈哈哈', 1, 57, 57, '2024-12-07 11:52:43', 12, '博客');
INSERT INTO `comment` VALUES (80, '我又回来了', 1, 79, 57, '2024-12-07 11:52:53', 12, '博客');
INSERT INTO `comment` VALUES (81, '测试数据', 1, NULL, 81, '2024-12-07 12:00:00', 3, '活动');
INSERT INTO `comment` VALUES (82, '哈哈哈', 1, NULL, 82, '2024-12-07 12:00:04', 3, '活动');
INSERT INTO `comment` VALUES (83, '确实挺不错的', 1, 81, 81, '2024-12-07 12:00:17', 3, '活动');

-- ----------------------------
-- Table structure for likes
-- ----------------------------
DROP TABLE IF EXISTS `likes`;
CREATE TABLE `likes`  (
  `id` int(11) NOT NULL AUTO_INCREMENT COMMENT 'ID',
  `fid` int(11) NULL DEFAULT NULL COMMENT '关联ID(关联的具体的博客或者活动的id)',
  `user_id` int(11) NULL DEFAULT NULL COMMENT '点赞人ID',
  `module` varchar(255) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci NULL DEFAULT NULL COMMENT '模块（分模块如博客，活动）',
  PRIMARY KEY (`id`) USING BTREE
) ENGINE = InnoDB AUTO_INCREMENT = 40 CHARACTER SET = utf8mb4 COLLATE = utf8mb4_unicode_ci COMMENT = '点赞' ROW_FORMAT = Dynamic;

-- ----------------------------
-- Records of likes
-- ----------------------------
INSERT INTO `likes` VALUES (2, 9, 13, '博客');
INSERT INTO `likes` VALUES (3, 5, 13, '博客');
INSERT INTO `likes` VALUES (4, 11, 13, '博客');
INSERT INTO `likes` VALUES (5, 6, 13, '博客');
INSERT INTO `likes` VALUES (6, 10, 13, '博客');
INSERT INTO `likes` VALUES (23, 8, 1, '活动');
INSERT INTO `likes` VALUES (24, 6, 1, '活动');
INSERT INTO `likes` VALUES (28, 3, 11, '活动');
INSERT INTO `likes` VALUES (29, 7, 11, '活动');
INSERT INTO `likes` VALUES (31, 7, 1, '活动');
INSERT INTO `likes` VALUES (32, 12, 14, '博客');
INSERT INTO `likes` VALUES (34, 10, 1, '活动');
INSERT INTO `likes` VALUES (35, 4, 1, '活动');
INSERT INTO `likes` VALUES (36, 3, 1, '博客');
INSERT INTO `likes` VALUES (38, 1, 1, '活动');
INSERT INTO `likes` VALUES (39, 3, 1, '活动');

-- ----------------------------
-- Table structure for notice
-- ----------------------------
DROP TABLE IF EXISTS `notice`;
CREATE TABLE `notice`  (
  `id` int(11) NOT NULL AUTO_INCREMENT COMMENT 'ID',
  `title` varchar(255) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci NULL DEFAULT NULL COMMENT '标题',
  `content` varchar(255) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci NULL DEFAULT NULL COMMENT '内容',
  `time` varchar(255) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci NULL DEFAULT NULL COMMENT '创建时间',
  `user` varchar(255) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci NULL DEFAULT NULL COMMENT '创建人',
  PRIMARY KEY (`id`) USING BTREE
) ENGINE = InnoDB AUTO_INCREMENT = 5 CHARACTER SET = utf8mb4 COLLATE = utf8mb4_unicode_ci COMMENT = '公告信息表' ROW_FORMAT = DYNAMIC;

-- ----------------------------
-- Records of notice
-- ----------------------------
INSERT INTO `notice` VALUES (1, '今天系统正式上线，开始内测', '今天系统正式上线，开始内测', '2023-09-27', 'admin');
INSERT INTO `notice` VALUES (2, '思想火花平台功能情况', '思想火花所有功能都已完成，可以正常使用', '2023-09-05', 'admin');
INSERT INTO `notice` VALUES (3, '天气状态', '今天天气很不好，只能待在家好好学习了', '2023-09-05', 'admin');
INSERT INTO `notice` VALUES (4, '又是努力的一天', '加油冲冲冲', '2024-12-07', 'admin');

-- ----------------------------
-- Table structure for user
-- ----------------------------
DROP TABLE IF EXISTS `user`;
CREATE TABLE `user`  (
  `id` int(10) NOT NULL AUTO_INCREMENT COMMENT 'ID',
  `username` varchar(255) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci NULL DEFAULT NULL COMMENT '用户名',
  `password` varchar(255) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci NULL DEFAULT NULL COMMENT '密码',
  `name` varchar(255) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci NULL DEFAULT NULL COMMENT '姓名',
  `avatar` varchar(255) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci NULL DEFAULT NULL COMMENT '头像',
  `role` varchar(255) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci NULL DEFAULT NULL COMMENT '角色标识',
  `sex` varchar(255) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci NULL DEFAULT NULL COMMENT '性别',
  `phone` varchar(255) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci NULL DEFAULT NULL COMMENT '电话',
  `email` varchar(255) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci NULL DEFAULT NULL COMMENT '邮箱',
  `info` varchar(255) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci NULL DEFAULT NULL COMMENT '简介',
  `birth` varchar(255) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci NULL DEFAULT NULL COMMENT '生日',
  PRIMARY KEY (`id`) USING BTREE
) ENGINE = InnoDB AUTO_INCREMENT = 17 CHARACTER SET = utf8mb4 COLLATE = utf8mb4_unicode_ci COMMENT = '用户信息' ROW_FORMAT = DYNAMIC;

-- ----------------------------
-- Records of user
-- ----------------------------
INSERT INTO `user` VALUES (1, 'xiaozhang', 'hhhhh', '小张', 'http://localhost:9090/files/1709882169490-OIP (21).jpg', 'USER', '男', '18978762132', 'xisddsc1@proton.me', '帅就一个字', '2004-03-11');
INSERT INTO `user` VALUES (10, 'xiaowang', '111222333', '小王', 'http://localhost:9090/files/1711932618375-1.jpeg', 'USER', '男', '18978767347', 'xiazhu961@proton.me', '好好学习天天向上', '2004-03-18');
INSERT INTO `user` VALUES (11, 'xiaoli', '11111', '小李', 'http://localhost:9090/files/1710005596168-OIP (19).jpg', 'USER', '女', '19890542376', '26734827343862@qq.com', '人生是一座座围城', NULL);
INSERT INTO `user` VALUES (12, 'xiaowu', '112211', '小吴', 'http://localhost:9090/files/1711932634861-20220612164733_72d8b.jpg', 'USER', '男', '18978762144', '26734822@qq.com', '快乐心情每一天', NULL);
INSERT INTO `user` VALUES (13, 'hhh', '111111', 'hhh', 'http://localhost:9090/files/1710075886269-OIP (3).jpg', 'USER', '女', '16543245673', 'xisegarvrf61@proton.me', '感觉至上', NULL);
INSERT INTO `user` VALUES (14, 'qqq', 'qqq', 'qqq', 'http://localhost:9090/files/1711679093445-OIP (15).jpg', 'USER', '女', '18978762674', '267123262@qq.com', '冲冲冲', NULL);
INSERT INTO `user` VALUES (15, 'qqqq', 'qqqq', '小明', 'http://localhost:9090/files/1711932650379-20220123222213_2899a.jpeg', 'USER', '女', '18977652132', '4827343862@qq.com', '哈哈哈哈哈', NULL);
INSERT INTO `user` VALUES (16, 'qqqqq', 'qqqqq', 'qqqqq', NULL, 'USER', NULL, NULL, NULL, NULL, NULL);

-- ----------------------------
-- View structure for user_v_1
-- ----------------------------
DROP VIEW IF EXISTS `user_v_1`;
CREATE ALGORITHM = UNDEFINED SQL SECURITY DEFINER VIEW `user_v_1` AS select `user`.`id` AS `id`,`user`.`username` AS `username` from `user`;

SET FOREIGN_KEY_CHECKS = 1;
